import{d as Ae}from"./chunk-YD5KS4OA.js";import{a as Ee,b as Fe,c as Ie,d as De}from"./chunk-A5DHTWAY.js";import{a as Te,b as Ne,c as Me}from"./chunk-6NDRP4GC.js";import{a as be,b as ye}from"./chunk-6XIUARUH.js";import{c as le}from"./chunk-MOOLWLJM.js";import{b as re,c as ce,d as se}from"./chunk-KI37LV7P.js";import"./chunk-E7GVRA4N.js";import{a as ke}from"./chunk-CVNOIYDV.js";import{h as Zt,q as te}from"./chunk-ALBC5A26.js";import{a as Se,b as we}from"./chunk-FKVLGXI2.js";import{B as ge,C as vt,D as xt,E as ve,F as xe,H as bt,I as yt,a as ee,b as ie,c as ne,d as st,i as mt,j as dt,l as Ct,n as T,p as ht,q as me,s as de,t as pe,u as ue,v as gt,w as _e,x as fe,y as Ce,z as he}from"./chunk-2TO4QPLG.js";import{W as Kt,X as Jt,aa as Xt,da as Yt,fa as pt,ha as oe,ia as ae,ja as ut,la as _t,ma as ft}from"./chunk-32SX6XCU.js";import"./chunk-ONLWHCXB.js";import{b as at,c as rt,d as lt,e as ct}from"./chunk-5JJHHZOZ.js";import{b as Gt,h as nt,i as qt,k as Qt,n as Ht,p as Wt,u as ot}from"./chunk-WVTO5ZNJ.js";import{$ as F,Bc as Pt,C as Mt,Cc as L,D as At,Db as _,Dc as Q,G as K,I as $t,Ic as Ft,Jc as jt,K as Vt,Kc as Ot,M as A,Mb as c,Nb as R,Sb as I,Sc as it,Tb as u,Ub as kt,Vb as S,Wb as w,Xb as a,Yb as r,Zb as p,_ as Bt,a as J,aa as E,b as X,bc as D,ca as $,g as Dt,ga as tt,gb as zt,hb as z,hc as x,jc as d,kb as n,la as et,lb as y,m as Y,ma as P,n as B,nc as O,oc as G,pb as Rt,pc as q,qb as Ut,r as Tt,s as Z,sc as Lt,tc as l,uc as U,vc as f,w as k,wc as Et,x as Nt,xa as g,xb as j,ya as v}from"./chunk-OW7OBW26.js";var $e=(()=>{class e{constructor(){}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=j({type:e,selectors:[["contacts"]],decls:1,vars:0,template:function(o,i){o&1&&p(0,"router-outlet")},dependencies:[rt],encapsulation:2,changeDetection:0})}}return e})();var N=(()=>{class e{constructor(t){this._httpClient=t,this._contact=new B(null),this._agents=new B(null),this._contacts=new B(null),this._countries=new B(null),this._tags=new B(null)}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}get agents$(){return this._agents.asObservable()}getContacts(){return this._httpClient.get("/api/contacts").pipe($(t=>{this._contacts.next(t)}))}searchContacts(t){return this._httpClient.get("/api/contacts/search",{params:{query:t}}).pipe($(o=>{this._contacts.next(o)}))}setContact(t){this._contact.next(t)}updateContactActive(t,o){return this._httpClient.put(`/api/contacts/${t}/active`,{active:o})}getContactById(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?this._httpClient.get(`/api/contacts/${t}`).pipe(k(i=>{let s={id:i.id,avatar:i.avatar||null,type:i.type||"Dealer",emails:i.emails||[],phoneNumbers:i.phoneNumbers?.map(C=>({country:C.country,phoneNumber:C.phone_number,label:C.label}))||[],company:i.company||"",legal_representative:i.legal_representative||"",agentName:i.agentName||"",addresses:i.addresses||[],billingCountry:i.billingCountry||null,notes:i.notes||"",tags:i.tags||[],agentId:i.agent_id,businessRegNr:i.business_reg_nr,active:i.active,customerNr:i.customer_nr,website:i.website,currency:i.currency,defaultAirport:i.default_airport||null,discount:i.discount,commission:i.commission,defaultCommission:i.default_commission};return this._contact.next(s),s})):Z(()=>new Error("Invalid contact ID format"))}createContact(){return this.contacts$.pipe(A(1),F(t=>this._httpClient.post("api/apps/contacts/contact",{}).pipe(k(o=>(this._contacts.next([o,...t]),o)))))}setEmptyContactWithId(t){let o={id:t,company:"",type:"Dealer",tags:[],emails:[],phoneNumbers:[],addresses:[]};this._contact.next(o)}updateContact(t,o){return this.contacts$.pipe(A(1),F(i=>this._httpClient.patch(`/api/contacts/${t}`,o,{headers:o instanceof FormData?void 0:{"Content-Type":"application/json"}}).pipe(k(s=>{let C=i.findIndex(b=>b.id===t);return C>-1&&(i[C]=s),this._contacts.next(i),s}),$(s=>{this._contact.next(s)}))))}deleteContact(t){return this._httpClient.delete(`/api/contacts/${t}`).pipe($(()=>{let i=this._contacts.getValue().filter(s=>s.id!==t);this._contacts.next(i)}))}getAgents(){return this._httpClient.get("/api/contacts/agents").pipe(k(t=>t.map(o=>X(J({},o),{defaultCommission:o.default_commission}))),$(t=>{this._agents.next(t)}))}getCountries(){return this._httpClient.get("api/apps/contacts/countries").pipe($(t=>{this._countries.next(t)}))}getTags(){return this._httpClient.get("api/apps/contacts/tags").pipe($(t=>{this._tags.next(t)}))}createTag(t){return this.tags$.pipe(A(1),F(o=>this._httpClient.post("api/apps/contacts/tag",{tag:t}).pipe(k(i=>(this._tags.next([...o,i]),i)))))}updateTag(t,o){return this.tags$.pipe(A(1),F(i=>this._httpClient.patch("api/apps/contacts/tag",{id:t,tag:o}).pipe(k(s=>{let C=i.findIndex(b=>b.id===t);return i[C]=s,this._tags.next(i),s}))))}deleteTag(t){return this.tags$.pipe(A(1),F(o=>this._httpClient.delete("api/apps/contacts/tag",{params:{id:t}}).pipe(k(i=>{let s=o.findIndex(C=>C.id===t);return o.splice(s,1),this._tags.next(o),i}),K(i=>i),F(i=>this.contacts$.pipe(A(1),k(s=>(s.forEach(C=>{let b=C.tags.findIndex(h=>h===t);b>-1&&C.tags.splice(b,1)}),i)))))))}uploadAvatar(t,o){return this.contacts$.pipe(A(1),F(i=>this._httpClient.post("api/apps/contacts/avatar",{id:t,avatar:o},{headers:{"Content-Type":o.type}}).pipe(k(s=>{let C=i.findIndex(b=>b.id===t);return i[C]=s,this._contacts.next(i),s}),F(s=>this.contact$.pipe(A(1),K(C=>C&&C.id===t),$(()=>(this._contact.next(s),s)))))))}static{this.\u0275fac=function(o){return new(o||e)(et(ot))}}static{this.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Qe=["matDrawer"],He=()=>({"=0":"No customers","=1":"customer",other:"customers"}),We=(e,m)=>({"dark:hover:bg-hover hover:bg-gray-100":e,"bg-primary-50 dark:bg-hover":m}),Ke=e=>["./",e],Je=(e,m)=>({"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":e,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":m}),Xe=(e,m)=>({"bg-yellow-200 text-yellow-800 dark:bg-red-600 dark:text-red-50":e,"bg-blue-200 text-blue-800 dark:bg-green-600 dark:text-green-50":m});function Ye(e,m){if(e&1&&l(0),e&2){let t=d();f(" ",t.contactsCount," ")}}function Ze(e,m){if(e&1&&(a(0,"div",20),l(1),r()),e&2){let t=d().$implicit,o=d(3);n(),f(" ",o.normalize(t.company).charAt(0)," ")}}function ti(e,m){if(e&1&&p(0,"img",23),e&2){let t=d().$implicit;c("src",t.avatar,z)}}function ei(e,m){e&1&&p(0,"div",24)}function ii(e,m){if(e&1&&(a(0,"span",27),l(1),r()),e&2){let t=d().$implicit;n(),f(" - ",t.legal_representative," ")}}function ni(e,m){if(e&1&&(a(0,"span",27),l(1," - "),a(2,"strong"),l(3,"Agent: "),r(),l(4),r()),e&2){let t=d().$implicit;n(4),f("",t.agentName," ")}}function oi(e,m){if(e&1&&(_(0,Ze,2,1,"div",20),a(1,"a",21)(2,"div",22),_(3,ti,1,1,"img",23)(4,ei,1,0,"div",24),r(),a(5,"div",25)(6,"div",26),l(7),_(8,ii,2,1,"span",27),r(),a(9,"div",28)(10,"span",29)(11,"span",30),l(12),r()(),a(13,"span",29)(14,"span",30),l(15),r()(),p(16,"span",31),a(17,"span",32),l(18),r(),_(19,ni,5,1,"span",27),r()()()),e&2){let t,o,i=m.$implicit,s=m.$index,C=d(2),b=d();u(s===0||b.normalize(i.company).charAt(0)!==b.normalize(C[s-1].company.charAt(0))?0:-1),n(),c("ngClass",Q(20,We,!b.selectedContact||b.selectedContact.id!==i.id,b.selectedContact&&b.selectedContact.id===i.id))("routerLink",L(23,Ke,i.id)),n(2),u(i.avatar?3:-1),n(),u(i.avatar?-1:4),n(3),f(" ",i.company," "),n(),u(i.legal_representative?8:-1),n(2),c("ngClass",Q(25,Je,i.active===!0,i.active===!1)),n(2),f(" ",i.active?"Active":"Inactive"," "),n(),c("ngClass",Q(28,Xe,i.type==="Agent",i.type==="Dealer")),n(2),f(" ",i.type," "),n(),R("background","url(/images/apps/contacts/flags.png) no-repeat 0 0")("background-size","24px 3876px")("background-position",(t=b.getCountryByName(i.billingCountry))==null?null:t.flagImagePos),c("matTooltip",(o=b.getCountryByName(i.billingCountry))==null?null:o.name),n(2),f(" ",i.billingCountry," "),n(),u(i.agentName?19:-1)}}function ai(e,m){if(e&1&&S(0,oi,20,31,null,null,I().trackByFn,!0),e&2){let t=d();w(t)}}function ri(e,m){e&1&&(a(0,"div",19),l(1," There are no customers! "),r())}function li(e,m){e&1&&_(0,ai,2,0)(1,ri,2,0,"div",19),e&2&&u(m.length?0:1)}var wt=(()=>{class e{get filter(){return this._filter$.value}setFilter(t){this._filter$.next(t),this._changeDetectorRef.markForCheck()}constructor(t,o,i,s,C,b){this._activatedRoute=t,this._changeDetectorRef=o,this._contactsService=i,this._document=s,this._router=C,this._fuseMediaWatcherService=b,this._filter$=new B("all"),this.contactsCount=0,this.contactsTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new de,this._unsubscribeAll=new Y}getUserNames(t){return t&&t.users&&t.users.length>0?t.users.map(o=>`${o.first_name} ${o.last_name}`).join(", "):""}normalize(t=""){return t.trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}ngOnInit(){this.contacts$=this._contactsService.contacts$,this._contactsService.contacts$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.contactsCount=t.length,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.selectedContact=t,this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe(E(this._unsubscribeAll),F(t=>this._contactsService.searchContacts(t))).subscribe(),this.matDrawer.openedChange.subscribe(t=>{t||(this.selectedContact=null,this._changeDetectorRef.markForCheck())}),this._fuseMediaWatcherService.onMediaChange$.pipe(E(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?this.drawerMode="side":this.drawerMode="over",this._changeDetectorRef.markForCheck()}),At(this._document,"keydown").pipe(E(this._unsubscribeAll),K(t=>(t.ctrlKey===!0||t.metaKey)&&t.key==="/")).subscribe(()=>{this.createContact()}),this.filteredContacts$=Nt([this._contactsService.contacts$,this.searchInputControl.valueChanges.pipe(Bt("")),this._filter$]).pipe(k(([t,o,i])=>t.filter(s=>i==="all"?!0:s.type===i).filter(s=>s.company?.toLowerCase().includes(o.toLowerCase())).sort((s,C)=>this.normalize(s.company).localeCompare(this.normalize(C.company)))))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createContact(){let t={company:"New Company",type:"Dealer",addresses:[{label:"Billing",address:"",zip:"",city:"",country:"",longitude:"",latitude:""}],phoneNumbers:[],emails:[],tags:[]};this._contactsService.createContact().subscribe(o=>{this._router.navigate(["./",o.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}getCountryByName(t){return this.countries.find(o=>o.name.toLowerCase()===t.toLowerCase())}static{this.\u0275fac=function(o){return new(o||e)(y(at),y(it),y(N),y(Gt),y(lt),y(le))}}static{this.\u0275cmp=j({type:e,selectors:[["contacts-list"]],viewQuery:function(o,i){if(o&1&&O(Qe,7),o&2){let s;G(s=q())&&(i.matDrawer=s.first)}},decls:34,vars:22,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900","md:w-160",3,"mode","opened","position","disableClose"],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-auto","flex-col","justify-between","border-b","px-6","py-8","sm:flex-row","md:flex-col","md:px-8"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"text-secondary","ml-0.5","font-medium"],[1,"mt-4","flex","gap-2","md:mt-4","mb-2"],["mat-button","",3,"click","color"],[1,"flex","items-center","sm:mt-0"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"text-secondary","sticky","top-0","z-10","-mt-px","border-b","border-t","bg-gray-50","px-6","py-1","font-medium","uppercase","dark:bg-gray-900","md:px-8"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-6","py-4","md:px-8",3,"ngClass","routerLink"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","Contact avatar",1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","min-w-0"],[1,"truncate","font-medium","leading-5"],[1,"hidden","sm:inline","truncate","leading-5","text-gray-400","font-normal","text-sm","italic"],[1,"text-secondary","flex","items-center","truncate","leading-5","gap-2","mt-1"],[1,"inline-flex","items-center","rounded-full","px-2.5","py-0.5","text-xs","font-bold","uppercase","tracking-wide",3,"ngClass"],[1,"whitespace-nowrap","leading-relaxed"],[1,"inline-block","h-4","w-6","overflow-hidden",3,"matTooltip"],[1,"text-xs","font-medium"]],template:function(o,i){if(o&1){let s=D();a(0,"div",1)(1,"mat-drawer-container",2),x("backdropClick",function(){return g(s),v(i.onBackdropClicked())}),a(2,"mat-drawer",3,0),p(4,"router-outlet"),r(),a(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),l(10," Customers "),r(),a(11,"div",8),_(12,Ye,1,1),l(13),Ft(14,"i18nPlural"),r()(),a(15,"div",9)(16,"button",10),x("click",function(){return g(s),v(i.setFilter("all"))}),l(17," All "),r(),a(18,"button",10),x("click",function(){return g(s),v(i.setFilter("Agent"))}),l(19," Agents "),r(),a(20,"button",10),x("click",function(){return g(s),v(i.setFilter("Dealer"))}),l(21," Dealers "),r()(),a(22,"div",11)(23,"div",5)(24,"mat-form-field",12),p(25,"mat-icon",13)(26,"input",14),r()(),a(27,"button",15),x("click",function(){return g(s),v(i.createContact())}),p(28,"mat-icon",16),a(29,"span",17),l(30,"Add"),r()()()(),a(31,"div",18),_(32,li,2,1),Ft(33,"async"),r()()()()()}if(o&2){let s;n(2),c("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),n(10),u(i.contactsCount>0?12:-1),n(),f(" ",Ot(14,16,i.contactsCount,Pt(21,He))," "),n(3),c("color",i.filter==="all"?"primary bg-primary-50":""),n(2),c("color",i.filter==="Agent"?"primary bg-primary-50":""),n(2),c("color",i.filter==="Dealer"?"primary bg-primary-50":""),n(5),c("svgIcon","heroicons_solid:magnifying-glass"),n(),c("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Search customers"),n(),c("color","primary"),n(),c("svgIcon","heroicons_outline:plus"),n(4),u((s=jt(33,19,i.filteredContacts$))?32:-1,s)}},dependencies:[De,Fe,Ie,Ee,rt,dt,mt,st,ft,_t,yt,bt,vt,Ct,ht,xt,gt,ut,pt,nt,ct,Qt,Ht],encapsulation:2,changeDetection:0})}}return e})();var Be=(()=>{class e{constructor(t){this._httpClient=t}getUsersByCompanyId(t){return this._httpClient.get(`/api/users/company/${t}`).pipe(k(o=>o.map(i=>({id:i.id,email:i.email,phone:i.phone,roleId:i.role_id,companyId:i.company_id,firstName:i.first_name||"",lastName:i.last_name||""}))))}createUser(t){return this._httpClient.post("/api/users",t)}updateUser(t){return this._httpClient.put(`/api/users/${t.id}`,t)}deleteUser(t){return this._httpClient.delete(`/api/users/${t}`)}static{this.\u0275fac=function(o){return new(o||e)(et(ot))}}static{this.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var mi=["avatarFileInput"],di=["tagsPanel"],pi=["tagsPanelOrigin"],ui=(e,m)=>m.id,_i=(e,m)=>m.code,fi=(e,m)=>({"bg-yellow-200 text-yellow-800 dark:bg-red-600 dark:text-red-50":e,"bg-blue-200 text-blue-800 dark:bg-green-600 dark:text-green-50":m}),Ci=e=>["/crm/customers/",e],It=e=>({"mt-6":e});function hi(e,m){e&1&&(a(0,"div",2),l(1," Loading contact... "),r())}function gi(e,m){if(e&1&&p(0,"img",11),e&2){let t=d(2);c("src",t.contact.avatar,z)}}function vi(e,m){if(e&1&&(a(0,"div",12),l(1),r()),e&2){let t=d(2);n(),f(" ",t.contact.company.charAt(0)," ")}}function xi(e,m){if(e&1&&(a(0,"div",21),p(1,"mat-icon",38),a(2,"div",25)(3,"strong",39),l(4),r(),a(5,"div",40)(6,"span",41)(7,"span",42),l(8),r()(),p(9,"span",43),a(10,"span",44),l(11),r()()()()),e&2){let t,o,i=d(2);n(),c("svgIcon","heroicons_outline:building-office-2"),n(3),f(" ",i.contact.company," "),n(2),c("ngClass",Q(12,fi,i.contact.type==="Agent",i.contact.type==="Dealer")),n(2),f(" ",i.contact.type," "),n(),R("background","url(/images/apps/contacts/flags.png) no-repeat 0 0")("background-size","24px 3876px")("background-position",(t=i.getCountryByName(i.contact.billingCountry))==null?null:t.flagImagePos),c("matTooltip",(o=i.getCountryByName(i.contact.billingCountry))==null?null:o.name),n(2),f(" ",i.contact.billingCountry," ")}}function bi(e,m){if(e&1&&(a(0,"div",21),p(1,"mat-icon",45),a(2,"div",25)(3,"strong"),l(4,"Legal Representative:"),r(),p(5,"br"),l(6),r()()),e&2){let t=d(2);n(6),f("",t.contact.legal_representative," ")}}function yi(e,m){if(e&1&&(a(0,"div",49)(1,"span",50),l(2,"\u2022"),r(),a(3,"span",51),l(4),r()()),e&2){let t=d().$implicit;n(4),U(t.label)}}function Si(e,m){if(e&1&&(a(0,"div",47)(1,"a",48),l(2),r(),_(3,yi,5,1,"div",49),r()),e&2){let t=m.$implicit;n(),c("href","mailto:"+t.email,z),n(),f(" ",t.email," "),n(),u(t.label?3:-1)}}function wi(e,m){if(e&1&&(a(0,"div",27),p(1,"mat-icon",38),a(2,"div",46),S(3,Si,4,3,"div",47,I().trackByFn,!0),r()()),e&2){let t=d(2);n(),c("svgIcon","heroicons_outline:envelope"),n(2),w(t.contact.emails)}}function ki(e,m){if(e&1&&(a(0,"div",21),p(1,"mat-icon",52),a(2,"div",25)(3,"strong"),l(4,"Agent:"),r(),a(5,"a",53),l(6),r()()(),a(7,"div",21),p(8,"mat-icon",54),a(9,"div",55)(10,"strong"),l(11,"Commission:"),r(),l(12),r()()),e&2){let t=d(2);n(),c("svgIcon","heroicons_solid:building-library"),n(4),c("routerLink",L(4,Ci,t.contact.agentId)),n(),f(" ",t.contact.agentName," "),n(6),f(" ",t.contact.commission," % ")}}function Ei(e,m){if(e&1&&(a(0,"div",21),p(1,"mat-icon",54),a(2,"div",25)(3,"strong"),l(4,"Discount:"),r(),l(5),a(6,"strong"),l(7,"Default commission:"),r(),l(8),r()()),e&2){let t=d(2);n(5),f(" ",t.contact.discount," % / "),n(3),f(" ",t.contact.defaultCommission," % ")}}function Fi(e,m){if(e&1&&l(0),e&2){let t=d(2);f(" ",t.contact.defaultAirport," ")}}function Ii(e,m){e&1&&(a(0,"em"),l(1,"No airport assigned"),r())}function Di(e,m){if(e&1&&(a(0,"div")(1,"div",58),l(2),r(),a(3,"div"),l(4),p(5,"br"),l(6),p(7,"br"),l(8),r()()),e&2){let t=m.$implicit;n(2),f(" ",t.label||"Address"," "),n(2),f(" ",t.address,""),n(2),Et(" ",t.zip," ",t.city,""),n(2),f(" ",t.country," ")}}function Ti(e,m){if(e&1&&(a(0,"div",30),p(1,"mat-icon",56),a(2,"div",57),S(3,Di,9,5,"div",null,I().trackByFn,!0),r()()),e&2){let t=d(2);n(),c("svgIcon","heroicons_outline:map-pin"),n(2),w(t.contact.addresses)}}function Ni(e,m){if(e&1&&(a(0,"strong"),l(1,"Customer nr."),r(),l(2)),e&2){let t=d(3);n(2),f(" ",t.contact.customerNr," ")}}function Mi(e,m){if(e&1&&(a(0,"strong"),l(1,"Business nr."),r(),l(2)),e&2){let t=d(3);n(2),f(" ",t.contact.businessRegNr," ")}}function Ai(e,m){if(e&1&&(a(0,"div",21),p(1,"mat-icon",38),a(2,"div",25),_(3,Ni,3,1),p(4,"br"),_(5,Mi,3,1),r()()),e&2){let t=d(2);n(),c("svgIcon","heroicons_outline:shield-check"),n(2),u(t.contact.customerNr?3:-1),n(2),u(t.contact.customerNr?5:-1)}}function $i(e,m){if(e&1&&(a(0,"div",49)(1,"span",50),l(2,"\u2022"),r(),a(3,"span",51),l(4),r()()),e&2){let t=d().$implicit;n(4),U(t.label)}}function Vi(e,m){if(e&1&&(a(0,"div",47),p(1,"div",59),a(2,"div",60),l(3),r(),a(4,"div",61),l(5),r(),_(6,$i,5,1,"div",49),r()),e&2){let t=m.$implicit,o=d(3);n(),R("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",o.getCountryByIso(t.country).flagImagePos),c("matTooltip",o.getCountryByIso(t.country).name),n(2),f(" ",o.getCountryByIso(t.country).code," "),n(2),f(" ",t.phoneNumber," "),n(),u(t.label?6:-1)}}function Bi(e,m){if(e&1&&(a(0,"div",27),p(1,"mat-icon",38),a(2,"div",46),S(3,Vi,7,10,"div",47,I().trackByFn,!0),r()()),e&2){let t=d(2);n(),c("svgIcon","heroicons_outline:phone"),n(2),w(t.contact.phoneNumbers)}}function zi(e,m){if(e&1&&(a(0,"div",27),p(1,"mat-icon",38)(2,"div",62),r()),e&2){let t=d(2);n(),c("svgIcon","heroicons_outline:bars-3-bottom-left"),n(),c("innerHTML",t.contact.notes,zt)}}function Ri(e,m){if(e&1&&(a(0,"div",65),l(1),r()),e&2){let t=d().$implicit;n(),Et(" ",t.firstName," ",t.lastName," ")}}function Ui(e,m){if(e&1&&(a(0,"div",66),l(1),r()),e&2){let t=d().$implicit;n(),f(" ",t.email," ")}}function Li(e,m){if(e&1){let t=D();a(0,"div",63)(1,"div",64),_(2,Ri,2,2,"div",65)(3,Ui,2,1,"div",66),r(),a(4,"div",67)(5,"button",68),x("click",function(){let i=g(t).$implicit,s=d(3);return v(s.editUser(i))}),a(6,"mat-icon"),l(7,"edit"),r()(),a(8,"button",69),x("click",function(){let i=g(t).$implicit,s=d(3);return v(s.deleteUser(i.id))}),a(9,"mat-icon"),l(10,"delete"),r()()()()}if(e&2){let t=m.$implicit;n(2),u(t.firstName||t.lastName?2:-1),n(),u(t.email?3:-1),n(5),c("color","warn")("matTooltip","Delete")}}function Pi(e,m){if(e&1&&(a(0,"div",33),S(1,Li,11,4,"div",63,ui),r()),e&2){let t=d(2);n(),w(t.users)}}function ji(e,m){e&1&&(a(0,"div",34),l(1,"No Login yet"),r())}function Oi(e,m){if(e&1){let t=D();a(0,"div",37)(1,"h3",70),l(2),r(),a(3,"form",71),x("ngSubmit",function(){g(t);let i=d(2);return v(i.saveUser())}),a(4,"div",72)(5,"mat-form-field",73)(6,"mat-label"),l(7,"First Name"),r(),p(8,"input",74),r(),a(9,"mat-form-field",73)(10,"mat-label"),l(11,"Last Name"),r(),p(12,"input",75),r()(),a(13,"mat-form-field",76)(14,"mat-label"),l(15,"Email"),r(),p(16,"input",77),r(),a(17,"div",78)(18,"button",79),x("click",function(){g(t);let i=d(2);return v(i.cancelUser())}),l(19,"Cancel"),r(),a(20,"button",80),l(21," Save "),r()()()()}if(e&2){let t=d(2);n(2),U(t.selectedUser?"Edit Login":"Add Login"),n(),c("formGroup",t.userForm)}}function Gi(e,m){if(e&1){let t=D();a(0,"div",3)(1,"div",4)(2,"a",5),x("click",function(){g(t);let i=d();return v(i.closeDrawer())}),p(3,"mat-icon",6),r()()(),a(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10),_(8,gi,1,1,"img",11)(9,vi,2,1,"div",12),r(),a(10,"div",13)(11,"button",14),x("click",function(){g(t);let i=d();return v(i.toggleEditMode(!0))}),p(12,"mat-icon",15),a(13,"span",16),l(14,"Edit"),r()()()(),a(15,"div",17)(16,"button",18),x("click",function(){g(t);let i=d();return v(i.createContact())}),a(17,"span",19),l(18,"Sales"),r()(),a(19,"button",18),x("click",function(){g(t);let i=d();return v(i.createContact())}),a(20,"span",19),l(21,"History"),r()()(),a(22,"div",20),_(23,xi,12,15,"div",21)(24,bi,7,1,"div",21),a(25,"div",22)(26,"mat-slide-toggle",23),x("change",function(i){g(t);let s=d();return v(s.toggleContactActive(i.checked))}),a(27,"span",16),l(28,"Customer is active"),r()()(),a(29,"div",21),p(30,"mat-icon",24),a(31,"div",25)(32,"a",26),l(33),r()()(),_(34,wi,5,1,"div",27)(35,ki,13,6)(36,Ei,9,2,"div",21),a(37,"div",21),p(38,"i",28),a(39,"div",25),_(40,Fi,1,1)(41,Ii,2,0,"em"),r()(),a(42,"div",21),p(43,"i",29),a(44,"div",25),l(45),r()(),_(46,Ti,5,1,"div",30)(47,Ai,6,3,"div",21)(48,Bi,5,1,"div",27)(49,zi,3,2,"div",27),a(50,"h2",31),l(51,"Login credentials"),r(),p(52,"hr",32),_(53,Pi,3,0,"div",33)(54,ji,2,0,"div",34),a(55,"div",35)(56,"button",36),x("click",function(){g(t);let i=d();return v(i.openAddUserPanel())}),l(57," Add Login "),r()(),_(58,Oi,22,2,"div",37),r()()()}if(e&2){let t=d();n(2),c("matTooltip","Close"),n(),c("svgIcon","heroicons_outline:x-mark"),n(5),u(t.contact.avatar?8:-1),n(),u(t.contact.avatar?-1:9),n(3),c("svgIcon","heroicons_solid:pencil-square"),n(4),c("color","primary bg-primary-50"),n(3),c("color","primary bg-primary-50"),n(4),u(t.contact.company?23:-1),n(),u(t.contact.legal_representative?24:-1),n(2),c("checked",t.contact.active),n(6),c("href","https://"+t.contact.website,z),n(),f(" ",t.contact.website," "),n(),u(t.contact.emails.length?34:-1),n(),u(t.contact.agentName?35:-1),n(),u(t.contact.agentName?-1:36),n(4),u(t.contact.defaultAirport?40:41),n(5),f(" ",t.contact.currency," "),n(),u((t.contact.addresses==null?null:t.contact.addresses.length)>0?46:-1),n(),u(t.contact.customerNr||t.contact.businessRegNr?47:-1),n(),u(t.contact.phoneNumbers!=null&&t.contact.phoneNumbers.length?48:-1),n(),u(t.contact.notes?49:-1),n(4),u(t.users.length>0?53:54),n(5),u(t.showUserForm?58:-1)}}function qi(e,m){if(e&1&&p(0,"img",11),e&2){let t=d(2);c("src",t.contact.avatar,z)}}function Qi(e,m){if(e&1&&(a(0,"div",12),l(1),r()),e&2){let t=d(2);n(),f(" ",t.contact.company.charAt(0)," ")}}function Hi(e,m){e&1&&(a(0,"mat-label"),l(1,"Label"),r())}function Wi(e,m){if(e&1&&(a(0,"mat-select",121)(1,"mat-option",126),l(2,"Billing"),r()()),e&2){let t=d().$implicit;c("formControl",t.get("label"))}}function Ki(e,m){if(e&1){let t=D();a(0,"mat-select",127),x("selectionChange",function(i){g(t);let s=d().$index,C=d(2);return v(C.onLabelChange(i,s))}),a(1,"mat-option",126),l(2,"Billing"),r(),a(3,"mat-option",128),l(4,"Shop"),r(),a(5,"mat-option",129),l(6,"Shipping"),r(),a(7,"mat-option",130),l(8,"Other"),r()()}if(e&2){let t=d().$implicit;c("formControl",t.get("label"))}}function Ji(e,m){e&1&&(a(0,"mat-label"),l(1,"Street + No."),r())}function Xi(e,m){e&1&&(a(0,"mat-label"),l(1,"ZIP"),r())}function Yi(e,m){e&1&&(a(0,"mat-label"),l(1,"City"),r())}function Zi(e,m){e&1&&(a(0,"mat-label"),l(1,"Country"),r())}function tn(e,m){if(e&1&&(a(0,"mat-option",108),l(1),r()),e&2){let t=m.$implicit;c("value",t.name),n(),f(" ",t.name," ")}}function en(e,m){e&1&&(a(0,"mat-label"),l(1,"Latitude"),r())}function nn(e,m){e&1&&(a(0,"mat-label"),l(1,"Longitude"),r())}function on(e,m){if(e&1){let t=D();a(0,"div",125)(1,"button",131),x("click",function(){g(t);let i=d().$index,s=d(2);return v(s.removeAddressField(i))}),p(2,"mat-icon",15),r()()}if(e&2){let t=d().$index;c("ngClass",L(2,It,t===0)),n(2),c("svgIcon","heroicons_solid:trash")}}function an(e,m){if(e&1&&(a(0,"div",119)(1,"mat-form-field",120),_(2,Hi,2,0,"mat-label")(3,Wi,3,1,"mat-select",121)(4,Ki,9,1,"mat-select",122),r(),a(5,"mat-form-field",123),_(6,Ji,2,0,"mat-label"),p(7,"mat-icon",92)(8,"input",124),r(),a(9,"mat-form-field",120),_(10,Xi,2,0,"mat-label"),p(11,"input",124),r()(),a(12,"div",105)(13,"mat-form-field",106),_(14,Yi,2,0,"mat-label"),p(15,"input",124),r(),a(16,"mat-form-field",106),_(17,Zi,2,0,"mat-label"),a(18,"mat-select",122),S(19,tn,2,2,"mat-option",108,I().trackByFn,!0),r()()(),a(21,"div",105)(22,"mat-form-field",106),_(23,en,2,0,"mat-label"),p(24,"input",124),r(),a(25,"mat-form-field",106),_(26,nn,2,0,"mat-label"),p(27,"input",124),r(),_(28,on,3,4,"div",125),r(),a(29,"mat-checkbox",122),l(30," Show on locator map "),r(),p(31,"hr")),e&2){let t=m.$implicit,o=m.$index,i=d(2);c("formGroupName",o),n(),c("subscriptSizing","dynamic"),n(),u(o===0?2:-1),n(),u(o===0?3:4),n(2),c("subscriptSizing","dynamic"),n(),u(o===0?6:-1),n(),c("svgIcon","heroicons_solid:map"),n(),c("formControl",t.get("address"))("placeholder","Street + No."),n(),c("subscriptSizing","dynamic"),n(),u(o===0?10:-1),n(),c("formControl",t.get("zip"))("placeholder","ZIP"),n(2),c("subscriptSizing","dynamic"),n(),u(o===0?14:-1),n(),c("formControl",t.get("city"))("placeholder","City"),n(),c("subscriptSizing","dynamic"),n(),u(o===0?17:-1),n(),c("formControl",t.get("country")),n(),w(i.countries),n(3),c("subscriptSizing","dynamic"),n(),u(o===0?23:-1),n(),c("formControl",t.get("latitude"))("placeholder","Latitude"),n(),c("subscriptSizing","dynamic"),n(),u(o===0?26:-1),n(),c("formControl",t.get("longitude"))("placeholder","Longitude"),n(),u(o!==0?28:-1),n(),c("formControl",t.get("show_on_locator_map"))}}function rn(e,m){if(e&1&&(a(0,"mat-option",108),l(1),r()),e&2){let t=m.$implicit;c("value",t.id),n(),f(" ",t.company," ")}}function ln(e,m){if(e&1&&(a(0,"div",110)(1,"mat-form-field",132)(2,"mat-label"),l(3,"Agent"),r(),p(4,"mat-icon",92),a(5,"mat-select",133),S(6,rn,2,2,"mat-option",108,kt),r()()(),a(8,"div")(9,"mat-form-field",132)(10,"mat-label"),l(11,"Commission"),r(),p(12,"input",134),r()()),e&2){let t=d(2);n(4),c("svgIcon","heroicons_solid:building-library"),n(2),w(t.agents)}}function cn(e,m){e&1&&(a(0,"div",110)(1,"mat-form-field",98)(2,"mat-label"),l(3,"Discount (%)"),r(),p(4,"input",135),r()(),a(5,"div",110)(6,"mat-form-field",98)(7,"mat-label"),l(8,"Default commission for Dealer (%)"),r(),p(9,"input",135),a(10,"mat-hint",136),l(11," Commission set for Agent in % - Default 10 % "),r()()()),e&2&&(n(),c("subscriptSizing","dynamic"),n(3),c("formControlName","discount"),n(2),c("subscriptSizing","dynamic"),n(3),c("formControlName","defaultCommission"))}function sn(e,m){if(e&1&&(a(0,"mat-option",108),l(1),r()),e&2){let t=m.$implicit;c("value",t.code),n(),f(" ",t.name," ")}}function mn(e,m){if(e&1&&(a(0,"mat-option",108),l(1),r()),e&2){let t=m.$implicit;c("value",t),n(),f(" ",t," ")}}function dn(e,m){e&1&&(a(0,"mat-label"),l(1,"Email"),r())}function pn(e,m){e&1&&(a(0,"mat-error"),l(1," Please enter a valid email address. "),r())}function un(e,m){e&1&&(a(0,"mat-label"),l(1,"Label"),r())}function _n(e,m){if(e&1&&(a(0,"mat-select",121)(1,"mat-option",141),l(2,"Order"),r()()),e&2){let t=d().$implicit;c("formControl",t.get("label"))}}function fn(e,m){if(e&1&&(a(0,"mat-select",122)(1,"mat-option",141),l(2,"Order"),r(),a(3,"mat-option",142),l(4,"Invoicing"),r(),a(5,"mat-option",143),l(6,"Newsletter"),r(),a(7,"mat-option",130),l(8,"Other"),r()()),e&2){let t=d().$implicit;c("formControl",t.get("label"))}}function Cn(e,m){if(e&1){let t=D();a(0,"div",125)(1,"button",144),x("click",function(){g(t);let i=d().$index,s=d(2);return v(s.removeEmailField(i))}),p(2,"mat-icon",15),r()()}if(e&2){let t=d().$index;c("ngClass",L(2,It,t===0)),n(2),c("svgIcon","heroicons_solid:trash")}}function hn(e,m){if(e&1&&(a(0,"div",27)(1,"mat-form-field",137),_(2,dn,2,0,"mat-label"),p(3,"mat-icon",92)(4,"input",138),_(5,pn,2,0,"mat-error",139),r(),a(6,"mat-form-field",140),_(7,un,2,0,"mat-label"),p(8,"mat-icon",92),_(9,_n,3,1,"mat-select",121)(10,fn,9,1,"mat-select",122),r(),_(11,Cn,3,4,"div",125),r()),e&2){let t,o=m.$implicit,i=m.$index;n(),c("subscriptSizing","dynamic"),n(),u(i===0?2:-1),n(),c("svgIcon","heroicons_solid:envelope"),n(),c("formControl",o.get("email"))("placeholder","Email address")("spellcheck",!1),n(),c("ngIf",((t=o.get("email"))==null?null:t.invalid)&&(((t=o.get("email"))==null?null:t.touched)||((t=o.get("email"))==null?null:t.dirty))),n(),c("subscriptSizing","dynamic"),n(),u(i===0?7:-1),n(),c("svgIcon","heroicons_solid:tag"),n(),u(i===0?9:10),n(2),u(i>0?11:-1)}}function gn(e,m){e&1&&(a(0,"mat-label"),l(1,"Phone"),r())}function vn(e,m){if(e&1&&(a(0,"mat-option",108)(1,"span",146),p(2,"span",150),a(3,"span",16),l(4),r(),a(5,"span",151),l(6),r()()()),e&2){let t=m.$implicit;c("value",t.iso),n(2),R("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",t.flagImagePos),n(2),U(t.name),n(2),U(t.code)}}function xn(e,m){e&1&&(a(0,"mat-label"),l(1,"Label"),r())}function bn(e,m){if(e&1){let t=D();a(0,"div",125)(1,"button",144),x("click",function(){g(t);let i=d().$index,s=d(2);return v(s.removePhoneNumberField(i))}),p(2,"mat-icon",15),r()()}if(e&2){let t=d().$index;c("ngClass",L(2,It,t===0)),n(2),c("svgIcon","heroicons_solid:trash")}}function yn(e,m){if(e&1&&(a(0,"div",111)(1,"mat-form-field",137),_(2,gn,2,0,"mat-label"),p(3,"input",124),a(4,"mat-select",145)(5,"mat-select-trigger")(6,"span",146),p(7,"span",147),a(8,"span",148),l(9),r()()(),S(10,vn,7,9,"mat-option",108,I().trackByFn,!0),r()(),a(12,"mat-form-field",149),_(13,xn,2,0,"mat-label"),p(14,"mat-icon",92),a(15,"mat-select",122)(16,"mat-option",108),l(17,"Mobile"),r(),a(18,"mat-option",108),l(19,"Work"),r(),a(20,"mat-option",108),l(21,"Home"),r(),a(22,"mat-option",108),l(23,"Fax"),r(),a(24,"mat-option",108),l(25,"Other"),r()()(),_(26,bn,3,4,"div",125),r()),e&2){let t=m.$implicit,o=m.$index,i=m.$count,s=d(2);n(),c("subscriptSizing","dynamic"),n(),u(o===0?2:-1),n(),c("formControl",t.get("phoneNumber"))("placeholder","Phone"),n(),c("formControl",t.get("country")),n(3),R("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",s.getCountryByIso(t.get("country").value).flagImagePos),n(2),U(s.getCountryByIso(t.get("country").value).code),n(),w(s.countries),n(2),c("subscriptSizing","dynamic"),n(),u(o===0?13:-1),n(),c("svgIcon","heroicons_solid:tag"),n(),c("formControl",t.get("label")),n(),c("value","Mobile"),n(2),c("value","Work"),n(2),c("value","Home"),n(2),c("value","Fax"),n(2),c("value","Other"),n(2),u(o===0&&o===i-1?-1:26)}}function Sn(e,m){e&1&&l(0," Invalid website URL. Use e.g. www.example.com ")}function wn(e,m){if(e&1){let t=D();a(0,"div",81)(1,"div",4)(2,"a",5),x("click",function(){g(t);let i=d();return v(i.closeDrawer())}),p(3,"mat-icon",6),r()()(),a(4,"div",82)(5,"div",8)(6,"form",83)(7,"div",9)(8,"div",84),p(9,"div",85),a(10,"div",86)(11,"div")(12,"input",87,0),x("change",function(){g(t);let i=Lt(13),s=d();return v(s.uploadAvatar(i.files))}),r(),a(14,"label",88),p(15,"mat-icon",6),r()(),a(16,"div")(17,"button",89),x("click",function(){g(t);let i=d();return v(i.removeAvatar())}),p(18,"mat-icon",6),r()()(),_(19,qi,1,1,"img",11)(20,Qi,2,1,"div",12),r()(),a(21,"div",90)(22,"mat-form-field",91)(23,"mat-label"),l(24,"Company"),r(),p(25,"mat-icon",92)(26,"input",93),r(),a(27,"mat-form-field",94)(28,"mat-label"),l(29,"Type"),r(),p(30,"mat-icon",92),a(31,"mat-select",95)(32,"mat-option",96),l(33,"Dealer"),r(),a(34,"mat-option",97),l(35,"Agent"),r()()()(),a(36,"div",90)(37,"mat-form-field",98)(38,"mat-label"),l(39,"Legal Representative"),r(),p(40,"input",99),r()(),a(41,"div",100)(42,"div",101),S(43,an,32,30,null,null,I().trackByFn,!0),r(),a(45,"div",102),x("click",function(){g(t);let i=d();return v(i.addAddressField())}),p(46,"mat-icon",15),a(47,"span",103),l(48,"Add address"),r()()(),a(49,"div",90)(50,"mat-form-field",98)(51,"mat-label"),l(52,"Customer number in Omnivers"),r(),p(53,"mat-icon",92)(54,"input",104),r(),a(55,"mat-form-field",98)(56,"mat-label"),l(57,"Business registration number"),r(),p(58,"mat-icon",92)(59,"input",104),r()(),p(60,"hr"),_(61,ln,13,1)(62,cn,12,4),a(63,"div",105)(64,"mat-form-field",106)(65,"mat-label"),l(66,"Default airport"),r(),a(67,"mat-select",107)(68,"mat-option",108),l(69,"- Select an airport -"),r(),S(70,sn,2,2,"mat-option",108,_i),r()(),a(72,"mat-form-field",106)(73,"mat-label"),l(74,"Currency"),r(),a(75,"mat-select",109),S(76,mn,2,2,"mat-option",108,kt),r()()(),p(78,"hr"),a(79,"div",110)(80,"div",101),S(81,hn,12,12,"div",27,I().trackByFn,!0),r(),a(83,"div",102),x("click",function(){g(t);let i=d();return v(i.addEmailField())}),p(84,"mat-icon",15),a(85,"span",103),l(86,"Add an email address"),r()()(),a(87,"div",110)(88,"div",101),S(89,yn,27,22,"div",111,I().trackByFn,!0),r(),a(91,"div",102),x("click",function(){g(t);let i=d();return v(i.addPhoneNumberField())}),p(92,"mat-icon",15),a(93,"span",103),l(94,"Add a phone number"),r()()(),a(95,"div",110)(96,"mat-form-field",112)(97,"mat-label"),l(98,"Website"),r(),a(99,"span",113),l(100,"https://"),r(),p(101,"input",114),a(102,"mat-error"),_(103,Sn,1,0),r()()(),a(104,"div",110)(105,"mat-form-field",98)(106,"mat-label"),l(107,"Notes"),r(),p(108,"mat-icon",92)(109,"textarea",115),r()(),a(110,"div",116)(111,"button",69),x("click",function(){g(t);let i=d();return v(i.deleteContact())}),l(112," Delete "),r(),a(113,"button",117),x("click",function(){g(t);let i=d();return v(i.toggleEditMode(!1))}),l(114," Cancel "),r(),a(115,"button",118),x("click",function(){g(t);let i=d();return v(i.updateContact())}),l(116," Save "),r()()()()()}if(e&2){let t,o,i,s=d();n(2),c("matTooltip","Close"),n(),c("svgIcon","heroicons_outline:x-mark"),n(3),c("formGroup",s.contactForm),n(6),c("multiple",!1)("accept","image/jpeg, image/png"),n(3),c("svgIcon","heroicons_outline:camera"),n(3),c("svgIcon","heroicons_outline:trash"),n(),u(s.contact.avatar?19:-1),n(),u(s.contact.avatar?-1:20),n(2),c("subscriptSizing","dynamic"),n(3),c("svgIcon","heroicons_solid:building-office-2"),n(2),c("subscriptSizing","dynamic"),n(3),c("svgIcon","heroicons_solid:identification"),n(7),c("subscriptSizing","dynamic"),n(3),c("formControl",s.contactForm.get("legal_representative")),n(3),w(s.contactForm.get("addresses").controls),n(3),c("svgIcon","heroicons_solid:plus-circle"),n(4),c("subscriptSizing","dynamic"),n(3),c("svgIcon","heroicons_solid:shield-check"),n(),c("formControlName","customerNr"),n(),c("subscriptSizing","dynamic"),n(3),c("svgIcon","heroicons_solid:shield-check"),n(),c("formControlName","businessRegNr"),n(2),u((s.contactForm==null||(t=s.contactForm.get("type"))==null?null:t.value)==="Dealer"?61:-1),n(),u((s.contactForm==null||(o=s.contactForm.get("type"))==null?null:o.value)==="Agent"?62:-1),n(2),c("subscriptSizing","dynamic"),n(4),c("value",null),n(2),w(s.airports),n(2),c("subscriptSizing","dynamic"),n(4),w(s.currencies),n(5),w(s.contactForm.get("emails").controls),n(3),c("svgIcon","heroicons_solid:plus-circle"),n(5),w(s.contactForm.get("phoneNumbers").controls),n(3),c("svgIcon","heroicons_solid:plus-circle"),n(4),c("subscriptSizing","dynamic"),n(7),u((i=s.contactForm.get("website"))!=null&&i.invalid&&((i=s.contactForm.get("website"))!=null&&i.touched)?103:-1),n(2),c("subscriptSizing","dynamic"),n(3),c("svgIcon","heroicons_solid:bars-3-bottom-left"),n(),c("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),n(2),c("color","warn")("matTooltip","Delete"),n(2),c("matTooltip","Cancel"),n(2),c("color","primary")("disabled",s.contactForm.invalid)("matTooltip","Save")}}var ze=(()=>{class e{constructor(t,o,i,s,C,b,h,M,V,H,W,Re){this._activatedRoute=t,this._changeDetectorRef=o,this._contactsListComponent=i,this._contactsService=s,this._usersService=C,this._formBuilder=b,this._fuseConfirmationService=h,this._renderer2=M,this._router=V,this._overlay=H,this._viewContainerRef=W,this._snackBar=Re,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new Y,this.users=[],this.showUserForm=!1,this.selectedUser=null,this.agents=[],this.airports=[{code:"NRT",name:"Tokyo Narita"},{code:"KIX",name:"Osaka Kansai"},{code:"AMS",name:"Amsterdam Schiphol"}],this.currencies=["EUR","USD","JPY","GBP"],this.countrySearch="",this.filteredCountries=[],this.loadingContact=!1,this.selectedAvatarFile=null}generateRandomPassword(t=10){let o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()",i="";for(let s=0;s<t;s++)i+=o.charAt(Math.floor(Math.random()*o.length));return i}openAddUserPanel(){this.showUserForm=!0,this.selectedUser=null,this.userForm=this._formBuilder.group({firstName:[""],lastName:[""],email:[""],companyId:[this.contact.id]})}editUser(t){this.showUserForm=!0,this.selectedUser=t,this.userForm=this._formBuilder.group({id:t.id,firstName:[t.firstName||""],lastName:[t.lastName||""],email:[t.email||""],companyId:[t.companyId]})}cancelUser(){this.showUserForm=!1,this.selectedUser=null}saveUser(){let t=this.userForm.getRawValue();(!t.password||t.password.trim()==="")&&(t.password=this.generateRandomPassword());let o={id:t.id,email:t.email,password:t.password,first_name:t.firstName,last_name:t.lastName,phone:t.phone,role_id:t.roleId,company_id:t.companyId,breeder_id:null};this.selectedUser?this._usersService.updateUser(o).subscribe({next:()=>{this.showUserForm=!1,this.loadUsersForCompany()},error:i=>{console.error("\u274C Error updating user:",i)}}):this._usersService.createUser(o).subscribe({next:()=>{this.showUserForm=!1,this.loadUsersForCompany()},error:i=>{console.error("\u274C Error creating user:",i),i.error.message==="User already exists"?this._snackBar.open("This email is already in use","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar-error"]}):this._snackBar.open("An error occurred. Please try again.","Close",{duration:3e3})}}),this._contactsService.getContacts().subscribe()}deleteUser(t){this._fuseConfirmationService.open({title:"Delete user",message:"Are you sure you want to delete this user? This action cannot be undone!",actions:{confirm:{label:"Delete"},cancel:{label:"Cancel"}}}).afterClosed().subscribe(i=>{i==="confirmed"?this._usersService.deleteUser(t).subscribe({next:()=>{console.log("User deleted successfully"),this.loadUsersForCompany()},error:s=>{console.error("\u274C Error deleting user:",s)}}):console.log("User deletion canceled"),this._contactsService.getContacts().subscribe()})}loadUsersForCompany(){this.contact?.id&&this._usersService.getUsersByCompanyId(this.contact.id).subscribe({next:t=>{this.users=t,this._changeDetectorRef.markForCheck()},error:t=>{console.error("\u274C Error loading users for company:",t)}})}toggleContactActive(t){this.contact?.id&&(this._contactsService.updateContactActive(this.contact.id,t).subscribe({next:()=>{this.contact.active=t,this._snackBar.open(`Contact ${t?"activated":"deactivated"}`,"Close",{duration:3e3})},error:o=>{console.error("Failed to update contact status",o),this._snackBar.open("Failed to update status","Close",{duration:3e3})}}),this._contactsService.getContacts().subscribe())}ngOnInit(){this._contactsService.countries$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this.filteredCountries=t,this._changeDetectorRef.markForCheck()}),this._contactsListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],avatar:[null],company:[""],legal_representative:[""],type:["Dealer"],agentId:[null],discount:[45],commission:[null],defaultCommission:[10],businessRegNr:[""],customerNr:[""],website:["",[T.pattern(/^www\.[a-zA-Z0-9\-]+\.[a-z]{2,}(\/[^\s]*)?$/)]],defaultAirport:[""],currency:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),addresses:this._formBuilder.array([this._formBuilder.group({label:[""],address:[""],zip:[""],city:[""],country:[""],longitude:[""],latitude:[""],show_on_locator_map:[!1]})]),notes:[null]}),this.contactForm.get("agentId")?.valueChanges.subscribe(t=>{let o=this.agents.find(i=>i.id===t);o&&this.contactForm.get("commission")?.setValue(o.defaultCommission)}),this.contactForm.get("type")?.valueChanges.subscribe(t=>{let o=this.contactForm.get("agentId");t==="Dealer"?o?.setValidators([T.required]):(o?.clearValidators(),o?.setValue(null)),o?.updateValueAndValidity()}),this.contactForm.get("isAgent")?.valueChanges.subscribe(t=>{t&&this.contactForm.get("agentId")?.reset()}),this._contactsService.getAgents().subscribe(),this._contactsService.agents$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.agents=t||[],this._changeDetectorRef.markForCheck()}),this._contactsService.contacts$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.contacts=t,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe(E(this._unsubscribeAll)).subscribe(t=>{if(!t){console.warn("\u2757 Geen contact ontvangen.");return}this._contactsListComponent.matDrawer.open(),this.contact=t,this._usersService.getUsersByCompanyId(this.contact.id).subscribe(h=>{this.users=h,this._changeDetectorRef.markForCheck()}),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(X(J({},t),{type:t?.type||"Dealer"}));let o=[],i=t.emails?.sort((h,M)=>{let V=["Order","Invoicing"],H=V.indexOf(h.label),W=V.indexOf(M.label);return H===-1&&W===-1?0:H===-1?1:W===-1?-1:H-W})??[];i.length>0?i.forEach((h,M)=>{o.push(this._formBuilder.group({email:[h.email,[T.required,T.email]],label:[h.label??(M===0?"Order":"")]}))}):o.push(this._formBuilder.group({email:["",[T.required,T.email]],label:["Order"]})),o.forEach(h=>{this.contactForm.get("emails").push(h)});let s=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(h=>{s.push(this._formBuilder.group({country:[h.country],phoneNumber:[h.phoneNumber],label:[h.label]}))}):s.push(this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),s.forEach(h=>{this.contactForm.get("phoneNumbers").push(h)}),this.contactForm.get("addresses").clear(),((t.addresses?.sort((h,M)=>h.label==="Billing"?-1:M.label==="Billing"?1:0)??[])?.length?t.addresses.map((h,M)=>{let V=this._formBuilder.group({label:[h.label],address:[h.address,h.label==="Billing"?T.required:[]],zip:[h.zip],city:[h.city],country:[h.country],longitude:[h.longitude],latitude:[h.latitude],show_on_locator_map:[h.show_on_locator_map??!1]});return console.log(`Adres ${M} - label:`,V.get("label")?.value),console.log("Type:",typeof V.get("label")?.value),V}):[this._formBuilder.group({label:["Billing"],address:["",T.required],zip:[""],city:[""],country:[""],longitude:[""],latitude:[""],show_on_locator_map:[!1]})]).forEach(h=>this.contactForm.get("addresses").push(h)),this.toggleEditMode(!1),t.company?this.toggleEditMode(!1):this.toggleEditMode(!0),this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this._contactsService.tags$.pipe(E(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()})}filterCountries(){let t=this.countrySearch.toLowerCase();this.filteredCountries=this.countries.filter(o=>o.name.toLowerCase().includes(t))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return Dt(this,null,function*(){let t=yield this._contactsListComponent.matDrawer.close();return yield this._router.navigate(["../"],{relativeTo:this._activatedRoute}),t})}toggleEditMode(t=null){t===null?this.editMode=!this.editMode:this.editMode=t,this._changeDetectorRef.markForCheck()}updateContact(){let t=this.contactForm.getRawValue();t.emails=t.emails.filter(i=>i.email),t.phoneNumbers=t.phoneNumbers.filter(i=>i.phoneNumber);let o=new FormData;this.selectedAvatarFile&&o.append("avatar",this.selectedAvatarFile),o.append("contact",JSON.stringify(t)),this.loadingContact=!0,this._contactsService.updateContact(t.id,o).subscribe({next:()=>{this.toggleEditMode(!1),Mt({list:this._contactsService.getContacts(),detail:this._contactsService.getContactById(t.id)}).subscribe(({detail:i})=>{this.contact=i,this.loadingContact=!1})},error:i=>{console.error("Update failed",i),this.loadingContact=!1}})}deleteContact(){this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this customer? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(o=>{if(o==="confirmed"){let i=this.contact.id,s=this.contacts.findIndex(h=>h.id===i),C=s+(s===this.contacts.length-1?-1:1),b=this.contacts.length===1&&this.contacts[0].id===i?null:this.contacts[C].id;this._contactsService.deleteContact(i).subscribe(h=>{h&&(b?this._router.navigate(["../",b],{relativeTo:this._activatedRoute}):this._router.navigate(["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1))}),this._changeDetectorRef.markForCheck()}})}uploadAvatar(t){if(!t.length)return;let o=t[0];if(!["image/jpeg","image/png"].includes(o.type))return;this.selectedAvatarFile=o;let s=new FileReader;s.onload=()=>{this.contact.avatar=s.result},s.readAsDataURL(o)}removeAvatar(){this.contactForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.contact.avatar=null}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._renderer2.addClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});let t=new Zt(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(t),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._renderer2.removeClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),t&&t.isAttached&&t.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){let o=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(i=>i.title.toLowerCase().includes(o))}filterTagsInputKeyDown(t){if(t.key!=="Enter")return;if(this.filteredTags.length===0){this.createTag(t.target.value),t.target.value="";return}let o=this.filteredTags[0];this.contact.tags.find(s=>s===o.id)?this.removeTagFromContact(o):this.addTagToContact(o)}createTag(t){let o={title:t};this._contactsService.createTag(o).subscribe(i=>{this.addTagToContact(i)})}updateTagTitle(t,o){t.title=o.target.value,this._contactsService.updateTag(t.id,t).pipe(Vt(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._contactsService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToContact(t){this.contact.tags.unshift(t.id),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}removeTagFromContact(t){this.contact.tags.splice(this.contact.tags.findIndex(o=>o===t.id),1),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}toggleContactTag(t){this.contact.tags.includes(t.id)?this.removeTagFromContact(t):this.addTagToContact(t)}shouldShowCreateTagButton(t){return!(t===""||this.tags.findIndex(o=>o.title.toLowerCase()===t.toLowerCase())>-1)}addEmailField(){let t=this._formBuilder.group({email:["",[T.required,T.email]],label:[""]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){let t=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}addAddressField(){let t=this._formBuilder.group({label:["Shop"],address:[""],zip:[""],city:[""],country:[""],longitude:[""],latitude:[""]});this.contactForm.get("addresses").push(t),this._changeDetectorRef.markForCheck()}removeAddressField(t){this.contactForm.get("addresses").removeAt(t),this._changeDetectorRef.markForCheck()}getCountryByIso(t){return this.countries.find(o=>o.iso===t)}getCountryByName(t){return this.countries.find(o=>o.name.toLowerCase()===t.toLowerCase())}trackByFn(t,o){return o.id||t}static{this.\u0275fac=function(o){return new(o||e)(y(at),y(it),y(wt),y(N),y(Be),y(ge),y(re),y(Rt),y(lt),y(te),y(Ut),y(ke))}}static{this.\u0275cmp=j({type:e,selectors:[["contacts-details"]],viewQuery:function(o,i){if(o&1&&(O(mi,5),O(di,5),O(pi,5)),o&2){let s;G(s=q())&&(i._avatarFileInput=s.first),G(s=q())&&(i._tagsPanel=s.first),G(s=q())&&(i._tagsPanelOrigin=s.first)}},decls:4,vars:3,consts:[["avatarFileInput",""],[1,"flex","w-full","flex-col"],[1,"flex","justify-center","items-center","p-12","text-gray-500","italic"],[1,"relative","h-32","w-full","bg-primary-800","px-8","sm:h-32","sm:px-12"],[1,"mx-auto","flex","w-full","max-w-3xl","items-center","justify-end","pt-6"],["mat-icon-button","",3,"click","matTooltip"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-auto","flex-col","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"-mt-16","flex","flex-auto","items-end"],[1,"ring-bg-card","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","overflow-hidden","rounded","bg-gray-200","text-8xl","font-bold","uppercase","leading-none","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"mb-1","ml-auto","flex","items-center"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-4","flex","flex-row","flex-wrap","justify-center","sm:justify-start","space-x-4","border-t","pt-6","items-center"],["mat-button","",1,"items-center","rounded-none",3,"click","color"],[1,"ml-2","mr-1"],[1,"mt-4","flex","flex-col","space-y-8","border-t","pt-6"],[1,"flex","sm:items-center"],[1,"flex","items-center","gap-2","mt-2"],["color","success",3,"change","checked"],["svgIcon","heroicons_outline:globe-alt"],[1,"ml-6","leading-6"],["target","_blank","rel","noopener",3,"href"],[1,"flex"],["aria-hidden","true",1,"fa-thin","fa-plane-arrival","fa-lg"],[1,"fa-thin","fa-coins","fa-lg","me-1"],[1,"flex","sm:items-start"],[1,"text-lg","font-bold","mt-6","mb-0"],[2,"margin-top","10px !important"],[1,"divide-y","mt-0",2,"margin-top","0px !important"],[1,"text-gray-400","italic","py-4",2,"margin-top","0px !important"],[1,"mt-4"],["mat-flat-button","","color","primary",3,"click"],[1,"bg-gray-100","p-4","mt-4","rounded","shadow"],[3,"svgIcon"],[1,"text-xl"],[1,"text-secondary","flex","items-center","truncate","leading-5","gap-2","mt-1"],[1,"inline-flex","items-center","rounded-full","px-2.5","py-0.5","text-xs","font-bold","uppercase","tracking-wide",3,"ngClass"],[1,"whitespace-nowrap","leading-relaxed"],[1,"inline-block","h-4","w-6","overflow-hidden",3,"matTooltip"],[1,"text-xs","font-medium"],["svgIcon","heroicons_outline:user-circle"],[1,"ml-6","min-w-0","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"text-primary-500","hover:underline",3,"href"],[1,"text-secondary","truncate","text-md"],[1,"mx-2"],[1,"font-medium"],["matPrefix","",1,"flex","icon-size-5",3,"svgIcon"],[1,"text-primary","hover:underline",3,"routerLink"],["svgIcon","heroicons_outline:receipt-percent"],[1,"ml-5","leading-6"],[1,"mt-1",3,"svgIcon"],[1,"ml-6","space-y-2","leading-6"],[1,"font-semibold","text-secondary"],[1,"hidden","h-4","w-6","overflow-hidden","sm:flex",3,"matTooltip"],[1,"font-mono","sm:ml-3"],[1,"ml-2.5","font-mono"],[1,"prose","prose-sm","ml-6","max-w-none",3,"innerHTML"],[1,"flex","justify-between","items-center","py-3"],[1,"flex","flex-col"],[1,"font-semibold"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-2"],["mat-icon-button","","color","primary",3,"click"],["mat-button","",3,"click","color","matTooltip"],[1,"font-semibold","mb-2"],[3,"ngSubmit","formGroup"],[1,"flex","flex-col","sm:flex-row","gap-4"],["appearance","fill",1,"w-full","sm:w-1/2"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["appearance","fill",1,"w-full","mt-2"],["matInput","","formControlName","email"],[1,"flex","justify-end","gap-2","mt-4"],["mat-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit"],[1,"relative","h-32","w-full","bg-primary-800","px-8","dark:bg-accent-700","sm:h-32","sm:px-12"],[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-12"],[3,"formGroup"],[1,"ring-bg-card","relative","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"absolute","inset-0","z-10","bg-black","bg-opacity-50"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","avatar-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","avatar-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"mt-8","flex","flex-col","sm:flex-row","gap-4"],[1,"w-full","sm:w-2/3",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","","formControlName","company","placeholder","Company"],[1,"w-full","sm:w-1/3",3,"subscriptSizing"],["formControlName","type"],["value","Dealer"],["value","Agent"],[1,"w-full",3,"subscriptSizing"],["matInput","",3,"formControl"],["formArrayName","addresses",1,"mt-8"],[1,"space-y-4"],[1,"group","-ml-4","mt-2","inline-flex","cursor-pointer","items-center","rounded","px-4","py-2",3,"click"],[1,"text-secondary","ml-2","font-medium","group-hover:underline"],["matInput","",3,"formControlName"],[1,"flex","flex-col","sm:flex-row","gap-4","mt-4"],[1,"w-full","sm:w-1/2",3,"subscriptSizing"],["formControlName","defaultAirport"],[3,"value"],["formControlName","currency"],[1,"mt-8"],[1,"relative","flex"],["appearance","fill",1,"w-full",3,"subscriptSizing"],["matPrefix",""],["matInput","","formControlName","website","placeholder","www.example.com","type","url"],["matInput","","cdkTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"-mx-6","mt-10","flex","items-center","border-t","bg-gray-50","py-4","pl-1","pr-4","dark:bg-transparent","sm:-mx-12","sm:pl-7","sm:pr-12"],["mat-button","",1,"ml-auto",3,"click","matTooltip"],["mat-flat-button","",1,"ml-2",3,"click","color","disabled","matTooltip"],[1,"relative","flex","flex-col","sm:flex-row","gap-4",3,"formGroupName"],[1,"w-full","sm:w-1/4",3,"subscriptSizing"],["disabled","",3,"formControl"],[3,"formControl"],[1,"w-full","sm:w-2/4",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder"],[1,"flex","w-10","items-center","pl-2",3,"ngClass"],["value","Billing"],[3,"selectionChange","formControl"],["value","Shop"],["value","Shipping"],["value","Other"],["mat-icon-button","","matTooltip","Remove address",1,"h-8","min-h-8","w-8",3,"click"],["appearance","fill",1,"w-full"],["formControlName","agentId"],["matInput","","type","number","formControlName","commission"],["matInput","","type","number",3,"formControlName"],[1,"text-start"],[1,"flex-auto",3,"subscriptSizing"],["matInput","","type","email",3,"formControl","placeholder","spellcheck"],[4,"ngIf"],[1,"ml-2","w-full","max-w-24","flex-auto","sm:ml-4","sm:max-w-40",3,"subscriptSizing"],["value","Order"],["value","Invoicing"],["value","Newsletter"],["mat-icon-button","","matTooltip","Remove",1,"h-8","min-h-8","w-8",3,"click"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"mr-1","hidden","h-4","w-6","overflow-hidden","sm:flex"],[1,"text-default","font-medium","sm:mx-0.5"],[1,"ml-2","w-full","max-w-36","flex-auto","sm:ml-4","sm:max-w-64",3,"subscriptSizing"],[1,"h-4","w-6","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(o,i){o&1&&(a(0,"div",1),_(1,hi,2,0,"div",2)(2,Gi,59,23)(3,wn,117,43),r()),o&2&&(n(),u(i.loadingContact?1:-1),n(),u(!i.editMode&&!i.loadingContact&&i.contact?2:-1),n(),u(i.editMode?3:-1))},dependencies:[ut,pt,ae,oe,se,ce,ft,_t,vt,pe,Ct,ue,ht,me,ye,be,xt,gt,_e,he,fe,Ce,Jt,Kt,dt,mt,ee,ne,ie,st,yt,bt,ve,we,Se,nt,Me,Te,Ne,Xt,Yt,Ae,Wt,qt,xe,ct],encapsulation:2,changeDetection:0})}}return e})();var kn=(e,m)=>{let t=P(N),o=e.paramMap.get("id");return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)?t.getContactById(o).pipe($t(s=>(console.warn(`\u2139\uFE0F Contact met id ${o} niet gevonden, nieuw contact wordt aangemaakt`),t.setEmptyContactWithId(o),Tt(null)))):(console.warn("\u26D4 Ongeldig UUID-formaat:",o),Z(()=>new Error("Invalid contact ID format")))},En=(e,m,t,o)=>{let i=o.root;for(;i.firstChild;)i=i.firstChild;return!o.url.includes("/contacts")||i.paramMap.get("id")?!0:e.closeDrawer().then(()=>!0)},wo=[{path:"",component:$e,resolve:{tags:()=>P(N).getTags()},children:[{path:"",component:wt,resolve:{contacts:()=>P(N).getContacts(),countries:()=>P(N).getCountries()},children:[{path:":id",component:ze,resolve:{contact:kn,countries:()=>P(N).getCountries()},canDeactivate:[En]}]}]}];export{wo as default};
