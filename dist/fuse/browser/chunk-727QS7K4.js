import{a as fe,b as he,c as Ce,d as ve}from"./chunk-YD5KS4OA.js";import{a as le,b as se,c as me,d as de}from"./chunk-A5DHTWAY.js";import{a as pe,b as _e,c as ue}from"./chunk-6NDRP4GC.js";import{c as Ht}from"./chunk-MOOLWLJM.js";import{b as Gt,c as Wt,d as Xt}from"./chunk-KI37LV7P.js";import"./chunk-E7GVRA4N.js";import{h as Lt,q as Ot}from"./chunk-ALBC5A26.js";import{a as re,b as ce}from"./chunk-FKVLGXI2.js";import{B as ne,C as mt,D as dt,E as oe,F as ae,H as pt,I as _t,a as Qt,d as tt,e as Ut,i as et,j as it,l as ct,n as Yt,p as lt,q as Jt,s as Zt,t as te,v as st,w as ee,z as ie}from"./chunk-2TO4QPLG.js";import{W as Nt,X as Pt,aa as jt,da as zt,fa as nt,ha as qt,ia as Kt,ja as ot,la as at,ma as rt}from"./chunk-32SX6XCU.js";import"./chunk-ONLWHCXB.js";import{b as J,c as Z,d as Q,e as At}from"./chunk-5JJHHZOZ.js";import{b as Mt,h as Y,k as Rt,m as Vt,n as $t,u as Bt}from"./chunk-WVTO5ZNJ.js";import{$ as y,Ab as Tt,Bc as It,Cc as q,D as vt,Db as C,Dc as Dt,G as A,I as gt,Ic as B,Jc as Ft,K as xt,Kc as W,Lc as ht,M as k,Mb as l,Nb as H,Nc as Et,Sb as S,Sc as X,Tb as _,Vb as T,Wb as I,Xb as a,Yb as r,Zb as p,aa as w,bc as D,ca as V,ga as bt,gb as kt,hb as N,hc as v,jc as m,kb as n,la as yt,lb as g,m as K,ma as $,n as U,nc as j,oc as z,pb as wt,pc as L,qb as St,r as Ct,s as G,sc as O,tc as d,uc as E,vc as x,w as F,xa as f,xb as P,ya as h}from"./chunk-OW7OBW26.js";var ge=(()=>{class e{constructor(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=P({type:e,selectors:[["contacts"]],decls:1,vars:0,template:function(i,o){i&1&&p(0,"router-outlet")},dependencies:[Z],encapsulation:2,changeDetection:0})}}return e})();var M=(()=>{class e{constructor(t){this._httpClient=t,this._contact=new U(null),this._contacts=new U(null),this._countries=new U(null),this._tags=new U(null)}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}getContacts(){return this._httpClient.get("api/apps/contacts/all").pipe(V(t=>{this._contacts.next(t)}))}searchContacts(t){return this._httpClient.get("api/apps/contacts/search",{params:{query:t}}).pipe(V(i=>{this._contacts.next(i)}))}getContactById(t){return this._contacts.pipe(k(1),F(i=>{let o=i.find(c=>c.id===t)||null;return this._contact.next(o),o}),y(i=>i?Ct(i):G("Could not found contact with id of "+t+"!")))}createContact(){return this.contacts$.pipe(k(1),y(t=>this._httpClient.post("api/apps/contacts/contact",{}).pipe(F(i=>(this._contacts.next([i,...t]),i)))))}updateContact(t,i){return this.contacts$.pipe(k(1),y(o=>this._httpClient.patch("api/apps/contacts/contact",{id:t,contact:i}).pipe(F(c=>{let u=o.findIndex(b=>b.id===t);return o[u]=c,this._contacts.next(o),c}),y(c=>this.contact$.pipe(k(1),A(u=>u&&u.id===t),V(()=>(this._contact.next(c),c)))))))}deleteContact(t){return this.contacts$.pipe(k(1),y(i=>this._httpClient.delete("api/apps/contacts/contact",{params:{id:t}}).pipe(F(o=>{let c=i.findIndex(u=>u.id===t);return i.splice(c,1),this._contacts.next(i),o}))))}getCountries(){return this._httpClient.get("api/apps/contacts/countries").pipe(V(t=>{this._countries.next(t)}))}getTags(){return this._httpClient.get("api/apps/contacts/tags").pipe(V(t=>{this._tags.next(t)}))}createTag(t){return this.tags$.pipe(k(1),y(i=>this._httpClient.post("api/apps/contacts/tag",{tag:t}).pipe(F(o=>(this._tags.next([...i,o]),o)))))}updateTag(t,i){return this.tags$.pipe(k(1),y(o=>this._httpClient.patch("api/apps/contacts/tag",{id:t,tag:i}).pipe(F(c=>{let u=o.findIndex(b=>b.id===t);return o[u]=c,this._tags.next(o),c}))))}deleteTag(t){return this.tags$.pipe(k(1),y(i=>this._httpClient.delete("api/apps/contacts/tag",{params:{id:t}}).pipe(F(o=>{let c=i.findIndex(u=>u.id===t);return i.splice(c,1),this._tags.next(i),o}),A(o=>o),y(o=>this.contacts$.pipe(k(1),F(c=>(c.forEach(u=>{let b=u.tags.findIndex(R=>R===t);b>-1&&u.tags.splice(b,1)}),o)))))))}uploadAvatar(t,i){return this.contacts$.pipe(k(1),y(o=>this._httpClient.post("api/apps/contacts/avatar",{id:t,avatar:i},{headers:{"Content-Type":i.type}}).pipe(F(c=>{let u=o.findIndex(b=>b.id===t);return o[u]=c,this._contacts.next(o),c}),y(c=>this.contact$.pipe(k(1),A(u=>u&&u.id===t),V(()=>(this._contact.next(c),c)))))))}static{this.\u0275fac=function(i){return new(i||e)(yt(Bt))}}static{this.\u0275prov=bt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var be=(()=>{class e{transform(t,i,o){return Array.isArray(t)?t.map(c=>o.find(u=>u[i]===c)):o.find(c=>c[i]===t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=Tt({name:"fuseFindByKey",type:e,pure:!1})}}return e})();var Ve=["matDrawer"],$e=()=>({"=0":"No breeders","=1":"breeder",other:"breeders"}),Be=(e,s)=>({"dark:hover:bg-hover hover:bg-gray-100":e,"bg-primary-50 dark:bg-hover":s}),Ae=e=>["./",e];function Ne(e,s){if(e&1&&d(0),e&2){let t=m();x(" ",t.contactsCount," ")}}function Pe(e,s){if(e&1&&(a(0,"div",18),d(1),r()),e&2){let t=m().$implicit;n(),x(" ",t.name.charAt(0)," ")}}function je(e,s){if(e&1&&p(0,"img",21),e&2){let t=m().$implicit;l("src",t.avatar,N)}}function ze(e,s){if(e&1&&(a(0,"div",22),d(1),r()),e&2){let t=m().$implicit;n(),x(" ",t.name.charAt(0)," ")}}function Le(e,s){if(e&1&&(C(0,Pe,2,1,"div",18),a(1,"a",19)(2,"div",20),C(3,je,1,1,"img",21)(4,ze,2,1,"div",22),r(),a(5,"div",23)(6,"div",24),d(7),r(),a(8,"div",25),d(9),r()()()),e&2){let t=s.$implicit,i=s.$index,o=m(2),c=m();_(i===0||t.name.charAt(0)!==o[i-1].name.charAt(0)?0:-1),n(),l("ngClass",Dt(7,Be,!c.selectedContact||c.selectedContact.id!==t.id,c.selectedContact&&c.selectedContact.id===t.id))("routerLink",q(10,Ae,t.id)),n(2),_(t.avatar?3:-1),n(),_(t.avatar?-1:4),n(3),x(" ",t.name," "),n(2),x(" ",t.title," ")}}function Oe(e,s){if(e&1&&T(0,Le,10,12,null,null,S().trackByFn,!0),e&2){let t=m();I(t)}}function Qe(e,s){e&1&&(a(0,"div",17),d(1," There are no contacts! "),r())}function Ue(e,s){e&1&&C(0,Oe,2,0)(1,Qe,2,0,"div",17),e&2&&_(s.length?0:1)}var ft=(()=>{class e{constructor(t,i,o,c,u,b){this._activatedRoute=t,this._changeDetectorRef=i,this._contactsService=o,this._document=c,this._router=u,this._fuseMediaWatcherService=b,this.contactsCount=0,this.contactsTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new Zt,this._unsubscribeAll=new K}ngOnInit(){this.contacts$=this._contactsService.contacts$,this._contactsService.contacts$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.contactsCount=t.length,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.selectedContact=t,this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe(w(this._unsubscribeAll),y(t=>this._contactsService.searchContacts(t))).subscribe(),this.matDrawer.openedChange.subscribe(t=>{t||(this.selectedContact=null,this._changeDetectorRef.markForCheck())}),this._fuseMediaWatcherService.onMediaChange$.pipe(w(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?this.drawerMode="side":this.drawerMode="over",this._changeDetectorRef.markForCheck()}),vt(this._document,"keydown").pipe(w(this._unsubscribeAll),A(t=>(t.ctrlKey===!0||t.metaKey)&&t.key==="/")).subscribe(()=>{this.createContact()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createContact(){this._contactsService.createContact().subscribe(t=>{this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}static{this.\u0275fac=function(i){return new(i||e)(g(J),g(X),g(M),g(Mt),g(Q),g(Ht))}}static{this.\u0275cmp=P({type:e,selectors:[["contacts-list"]],viewQuery:function(i,o){if(i&1&&j(Ve,7),i&2){let c;z(c=L())&&(o.matDrawer=c.first)}},decls:27,vars:19,consts:[["matDrawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent",3,"backdropClick"],[1,"w-full","dark:bg-gray-900","md:w-160",3,"mode","opened","position","disableClose"],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-auto","flex-col","justify-between","border-b","px-6","py-8","sm:flex-row","md:flex-col","md:px-8"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"text-secondary","ml-0.5","font-medium"],[1,"mt-4","flex","items-center","sm:mt-0","md:mt-4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"text-secondary","sticky","top-0","z-10","-mt-px","border-b","border-t","bg-gray-50","px-6","py-1","font-medium","uppercase","dark:bg-gray-900","md:px-8"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-6","py-4","md:px-8",3,"ngClass","routerLink"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","Contact avatar",1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","min-w-0"],[1,"truncate","font-medium","leading-5"],[1,"text-secondary","truncate","leading-5"]],template:function(i,o){if(i&1){let c=D();a(0,"div",1)(1,"mat-drawer-container",2),v("backdropClick",function(){return f(c),h(o.onBackdropClicked())}),a(2,"mat-drawer",3,0),p(4,"router-outlet"),r(),a(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),d(10," Breeders "),r(),a(11,"div",8),C(12,Ne,1,1),d(13),B(14,"i18nPlural"),r()(),a(15,"div",9)(16,"div",5)(17,"mat-form-field",10),p(18,"mat-icon",11)(19,"input",12),r()(),a(20,"button",13),v("click",function(){return f(c),h(o.createContact())}),p(21,"mat-icon",14),a(22,"span",15),d(23,"Add"),r()()()(),a(24,"div",16),C(25,Ue,2,1),B(26,"async"),r()()()()()}if(i&2){let c;n(2),l("mode",o.drawerMode)("opened",!1)("position","end")("disableClose",!0),n(10),_(o.contactsCount>0?12:-1),n(),x(" ",W(14,13,o.contactsCount,It(18,$e))," "),n(5),l("svgIcon","heroicons_solid:magnifying-glass"),n(),l("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Search breeders"),n(),l("color","primary"),n(),l("svgIcon","heroicons_outline:plus"),n(4),_((c=Ft(26,16,o.contacts$))?25:-1,c)}},dependencies:[de,se,me,le,Z,it,et,tt,rt,at,_t,pt,mt,ct,lt,dt,st,ot,nt,Y,At,Rt,$t],encapsulation:2,changeDetection:0})}}return e})();var Ke=["avatarFileInput"],Ge=["tagsPanel"],He=["tagsPanelOrigin"],ye=e=>({"mt-6":e});function We(e,s){if(e&1&&p(0,"img",14),e&2){let t=m(2);l("src",t.contact.avatar,N)}}function Xe(e,s){if(e&1&&(a(0,"div",15),d(1),r()),e&2){let t=m(2);n(),x(" ",t.contact.name.charAt(0)," ")}}function Ye(e,s){if(e&1&&(a(0,"div",25)(1,"span",26),d(2),r()()),e&2){let t=s.$implicit;n(2),E(t.title)}}function Je(e,s){if(e&1&&(a(0,"div",21),T(1,Ye,3,1,"div",25,S().trackByFn,!0),B(3,"fuseFindByKey"),r()),e&2){let t=m(2);n(),I(ht(3,0,t.contact.tags,"id",t.tags))}}function Ze(e,s){if(e&1&&(a(0,"div",23),p(1,"mat-icon",27),a(2,"div",28),d(3),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:briefcase"),n(2),x(" ",t.contact.title," ")}}function ti(e,s){if(e&1&&(a(0,"div",23),p(1,"mat-icon",27),a(2,"div",28),d(3),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:building-office-2"),n(2),x(" ",t.contact.company," ")}}function ei(e,s){if(e&1&&(a(0,"div",32)(1,"span",33),d(2,"\u2022"),r(),a(3,"span",34),d(4),r()()),e&2){let t=m().$implicit;n(4),E(t.label)}}function ii(e,s){if(e&1&&(a(0,"div",30)(1,"a",31),d(2),r(),C(3,ei,5,1,"div",32),r()),e&2){let t=s.$implicit;n(),l("href","mailto:"+t.email,N),n(),x(" ",t.email," "),n(),_(t.label?3:-1)}}function ni(e,s){if(e&1&&(a(0,"div",24),p(1,"mat-icon",27),a(2,"div",29),T(3,ii,4,3,"div",30,S().trackByFn,!0),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:envelope"),n(2),I(t.contact.emails)}}function oi(e,s){if(e&1&&(a(0,"div",32)(1,"span",33),d(2,"\u2022"),r(),a(3,"span",34),d(4),r()()),e&2){let t=m().$implicit;n(4),E(t.label)}}function ai(e,s){if(e&1&&(a(0,"div",30),p(1,"div",35),a(2,"div",36),d(3),r(),a(4,"div",37),d(5),r(),C(6,oi,5,1,"div",32),r()),e&2){let t=s.$implicit,i=m(3);n(),H("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",i.getCountryByIso(t.country).flagImagePos),l("matTooltip",i.getCountryByIso(t.country).name),n(2),x(" ",i.getCountryByIso(t.country).code," "),n(2),x(" ",t.phoneNumber," "),n(),_(t.label?6:-1)}}function ri(e,s){if(e&1&&(a(0,"div",24),p(1,"mat-icon",27),a(2,"div",29),T(3,ai,7,10,"div",30,S().trackByFn,!0),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:phone"),n(2),I(t.contact.phoneNumbers)}}function ci(e,s){if(e&1&&(a(0,"div",23),p(1,"mat-icon",27),a(2,"div",28),d(3),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:map-pin"),n(2),x(" ",t.contact.address," ")}}function li(e,s){if(e&1&&(a(0,"div",23),p(1,"mat-icon",27),a(2,"div",28),d(3),B(4,"date"),r()()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:cake"),n(2),x(" ",W(4,2,t.contact.birthday,"longDate")," ")}}function si(e,s){if(e&1&&(a(0,"div",24),p(1,"mat-icon",27)(2,"div",38),r()),e&2){let t=m(2);n(),l("svgIcon","heroicons_outline:bars-3-bottom-left"),n(),l("innerHTML",t.contact.notes,kt)}}function mi(e,s){if(e&1){let t=D();a(0,"div",6)(1,"div",7)(2,"a",8),v("click",function(){f(t);let o=m();return h(o.closeDrawer())}),p(3,"mat-icon",9),r()()(),a(4,"div",10)(5,"div",11)(6,"div",12)(7,"div",13),C(8,We,1,1,"img",14)(9,Xe,2,1,"div",15),r(),a(10,"div",16)(11,"button",17),v("click",function(){f(t);let o=m();return h(o.toggleEditMode(!0))}),p(12,"mat-icon",18),a(13,"span",19),d(14,"Edit"),r()()()(),a(15,"div",20),d(16),r(),C(17,Je,4,4,"div",21),a(18,"div",22),C(19,Ze,4,2,"div",23)(20,ti,4,2,"div",23)(21,ni,5,1,"div",24)(22,ri,5,1,"div",24)(23,ci,4,2,"div",23)(24,li,5,5,"div",23)(25,si,3,2,"div",24),r()()()}if(e&2){let t=m();n(2),l("matTooltip","Close"),n(),l("svgIcon","heroicons_outline:x-mark"),n(5),_(t.contact.avatar?8:-1),n(),_(t.contact.avatar?-1:9),n(3),l("svgIcon","heroicons_solid:pencil-square"),n(4),x(" ",t.contact.name," "),n(),_(t.contact.tags.length?17:-1),n(2),_(t.contact.title?19:-1),n(),_(t.contact.company?20:-1),n(),_(t.contact.emails.length?21:-1),n(),_(t.contact.phoneNumbers.length?22:-1),n(),_(t.contact.address?23:-1),n(),_(t.contact.birthday?24:-1),n(),_(t.contact.notes?25:-1)}}function di(e,s){if(e&1&&p(0,"img",14),e&2){let t=m(2);l("src",t.contact.avatar,N)}}function pi(e,s){if(e&1&&(a(0,"div",15),d(1),r()),e&2){let t=m(2);n(),x(" ",t.contact.name.charAt(0)," ")}}function _i(e,s){if(e&1&&(a(0,"div",66)(1,"span",67),d(2),r()()),e&2){let t=s.$implicit;n(2),E(t.title)}}function ui(e,s){if(e&1&&(T(0,_i,3,1,"div",66,S().trackByFn,!0),B(2,"fuseFindByKey")),e&2){let t=m(2);I(ht(2,0,t.contact.tags,"id",t.tags))}}function fi(e,s){e&1&&(p(0,"mat-icon",18),a(1,"span",68),d(2,"Edit"),r()),e&2&&l("svgIcon","heroicons_solid:pencil-square")}function hi(e,s){e&1&&(p(0,"mat-icon",18),a(1,"span",68),d(2,"Add"),r()),e&2&&l("svgIcon","heroicons_solid:plus-circle")}function Ci(e,s){e&1&&p(0,"mat-icon",18),e&2&&l("svgIcon","heroicons_solid:pencil-square")}function vi(e,s){e&1&&p(0,"mat-icon",18),e&2&&l("svgIcon","heroicons_solid:check")}function gi(e,s){if(e&1){let t=D();a(0,"div",78),v("click",function(){let o=f(t).$implicit,c=m(4);return h(c.toggleContactTag(o))}),p(1,"mat-checkbox",79),a(2,"div"),d(3),r()()}if(e&2){let t=s.$implicit,i=m(4);n(),l("checked",i.contact.tags.includes(t.id))("color","primary")("disableRipple",!0),n(2),E(t.title)}}function xi(e,s){if(e&1&&T(0,gi,4,4,"div",77,S().trackByFn,!0),e&2){let t=m(3);I(t.filteredTags)}}function bi(e,s){if(e&1){let t=D();a(0,"div",71)(1,"mat-form-field",80)(2,"input",81),v("input",function(o){let c=f(t).$implicit,u=m(4);return h(u.updateTagTitle(c,o))}),r(),a(3,"button",82),v("click",function(){let o=f(t).$implicit,c=m(4);return h(c.deleteTag(o))}),p(4,"mat-icon",83),r()()()}if(e&2){let t=s.$implicit;n(),l("subscriptSizing","dynamic"),n(),l("value",t.title),n(2),l("svgIcon","heroicons_solid:trash")}}function yi(e,s){if(e&1&&(a(0,"div",75),T(1,bi,5,3,"div",71,S().trackByFn,!0),r()),e&2){let t=m(3);n(),I(t.filteredTags)}}function ki(e,s){if(e&1){let t=D();a(0,"div",84),v("click",function(){f(t),m();let o=O(6);return m(2).createTag(o.value),h(o.value="")}),p(1,"mat-icon",85),a(2,"div",86),d(3,' Create "'),a(4,"b"),d(5),r(),d(6,'" '),r()()}if(e&2){m();let t=O(6);n(),l("svgIcon","heroicons_solid:plus-circle"),n(4),E(t.value)}}function wi(e,s){if(e&1){let t=D();a(0,"div",69)(1,"div",70)(2,"div",71),p(3,"mat-icon",18),a(4,"div",19)(5,"input",72,4),v("input",function(o){f(t);let c=m(2);return h(c.filterTags(o))})("keydown",function(o){f(t);let c=m(2);return h(c.filterTagsInputKeyDown(o))}),r()()(),a(7,"button",73),v("click",function(){f(t);let o=m(2);return h(o.toggleTagsEditMode())}),C(8,Ci,1,1,"mat-icon",18)(9,vi,1,1,"mat-icon",18),r()(),a(10,"div",74),C(11,xi,2,0)(12,yi,3,0,"div",75)(13,ki,7,2,"div",76),r()()}if(e&2){let t=O(6),i=m(2);n(3),l("svgIcon","heroicons_solid:magnifying-glass"),n(2),l("maxLength",30),n(3),_(i.tagsEditMode?-1:8),n(),_(i.tagsEditMode?9:-1),n(2),_(i.tagsEditMode?-1:11),n(),_(i.tagsEditMode?12:-1),n(),_(i.shouldShowCreateTagButton(t.value)?13:-1)}}function Si(e,s){e&1&&(a(0,"mat-label"),d(1,"Email"),r())}function Ti(e,s){e&1&&(a(0,"mat-label"),d(1,"Label"),r())}function Ii(e,s){if(e&1){let t=D();a(0,"div",91)(1,"button",92),v("click",function(){f(t);let o=m().$index,c=m(2);return h(c.removeEmailField(o))}),p(2,"mat-icon",18),r()()}if(e&2){let t=m().$index;l("ngClass",q(2,ye,t===0)),n(2),l("svgIcon","heroicons_solid:trash")}}function Di(e,s){if(e&1&&(a(0,"div",24)(1,"mat-form-field",87),C(2,Si,2,0,"mat-label"),p(3,"mat-icon",50)(4,"input",88),r(),a(5,"mat-form-field",89),C(6,Ti,2,0,"mat-label"),p(7,"mat-icon",50)(8,"input",90),r(),C(9,Ii,3,4,"div",91),r()),e&2){let t=s.$implicit,i=s.$index,o=s.$count;n(),l("subscriptSizing","dynamic"),n(),_(i===0?2:-1),n(),l("svgIcon","heroicons_solid:envelope"),n(),l("formControl",t.get("email"))("placeholder","Email address")("spellcheck",!1),n(),l("subscriptSizing","dynamic"),n(),_(i===0?6:-1),n(),l("svgIcon","heroicons_solid:tag"),n(),l("formControl",t.get("label"))("placeholder","Label"),n(),_(i===0&&i===o-1?-1:9)}}function Fi(e,s){e&1&&(a(0,"mat-label"),d(1,"Phone"),r())}function Ei(e,s){if(e&1&&(a(0,"mat-option",96)(1,"span",71),p(2,"span",97),a(3,"span",19),d(4),r(),a(5,"span",98),d(6),r()()()),e&2){let t=s.$implicit;l("value",t.iso),n(2),H("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",t.flagImagePos),n(2),E(t.name),n(2),E(t.code)}}function Mi(e,s){e&1&&(a(0,"mat-label"),d(1,"Label"),r())}function Ri(e,s){if(e&1){let t=D();a(0,"div",91)(1,"button",92),v("click",function(){f(t);let o=m().$index,c=m(2);return h(c.removePhoneNumberField(o))}),p(2,"mat-icon",18),r()()}if(e&2){let t=m().$index;l("ngClass",q(2,ye,t===0)),n(2),l("svgIcon","heroicons_solid:trash")}}function Vi(e,s){if(e&1&&(a(0,"div",58)(1,"mat-form-field",87),C(2,Fi,2,0,"mat-label"),p(3,"input",90),a(4,"mat-select",93)(5,"mat-select-trigger")(6,"span",71),p(7,"span",94),a(8,"span",95),d(9),r()()(),T(10,Ei,7,9,"mat-option",96,S().trackByFn,!0),r()(),a(12,"mat-form-field",89),C(13,Mi,2,0,"mat-label"),p(14,"mat-icon",50)(15,"input",90),r(),C(16,Ri,3,4,"div",91),r()),e&2){let t=s.$implicit,i=s.$index,o=s.$count,c=m(2);n(),l("subscriptSizing","dynamic"),n(),_(i===0?2:-1),n(),l("formControl",t.get("phoneNumber"))("placeholder","Phone"),n(),l("formControl",t.get("country")),n(3),H("background","url('/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",c.getCountryByIso(t.get("country").value).flagImagePos),n(2),E(c.getCountryByIso(t.get("country").value).code),n(),I(c.countries),n(2),l("subscriptSizing","dynamic"),n(),_(i===0?13:-1),n(),l("svgIcon","heroicons_solid:tag"),n(),l("formControl",t.get("label"))("placeholder","Label"),n(),_(i===0&&i===o-1?-1:16)}}function $i(e,s){if(e&1){let t=D();a(0,"div",39)(1,"div",7)(2,"a",8),v("click",function(){f(t);let o=m();return h(o.closeDrawer())}),p(3,"mat-icon",9),r()()(),a(4,"div",40)(5,"div",11)(6,"form",41)(7,"div",12)(8,"div",42),p(9,"div",43),a(10,"div",44)(11,"div")(12,"input",45,0),v("change",function(){f(t);let o=O(13),c=m();return h(c.uploadAvatar(o.files))}),r(),a(14,"label",46),p(15,"mat-icon",9),r()(),a(16,"div")(17,"button",47),v("click",function(){f(t);let o=m();return h(o.removeAvatar())}),p(18,"mat-icon",9),r()()(),C(19,di,1,1,"img",14)(20,pi,2,1,"div",15),r()(),a(21,"div",48)(22,"mat-form-field",49)(23,"mat-label"),d(24,"Name"),r(),p(25,"mat-icon",50)(26,"input",51),r()(),a(27,"div",52),C(28,ui,3,4),a(29,"div",53,1),v("click",function(){f(t);let o=m();return h(o.openTagsPanel())}),C(31,fi,3,1)(32,hi,3,1)(33,wi,14,7,"ng-template",null,2,Et),r()(),a(35,"div",48)(36,"mat-form-field",49)(37,"mat-label"),d(38,"Title"),r(),p(39,"mat-icon",50)(40,"input",54),r()(),a(41,"div",48)(42,"mat-form-field",49)(43,"mat-label"),d(44,"Company"),r(),p(45,"mat-icon",50)(46,"input",54),r()(),a(47,"div",48)(48,"div",55),T(49,Di,10,12,"div",24,S().trackByFn,!0),r(),a(51,"div",56),v("click",function(){f(t);let o=m();return h(o.addEmailField())}),p(52,"mat-icon",18),a(53,"span",57),d(54,"Add an email address"),r()()(),a(55,"div",48)(56,"div",55),T(57,Vi,17,18,"div",58,S().trackByFn,!0),r(),a(59,"div",56),v("click",function(){f(t);let o=m();return h(o.addPhoneNumberField())}),p(60,"mat-icon",18),a(61,"span",57),d(62,"Add a phone number"),r()()(),a(63,"div",48)(64,"mat-form-field",49)(65,"mat-label"),d(66,"Address"),r(),p(67,"mat-icon",50)(68,"input",54),r()(),a(69,"div",48)(70,"mat-form-field",49)(71,"mat-label"),d(72,"Birthday"),r(),p(73,"mat-icon",50)(74,"input",59)(75,"mat-datepicker-toggle",60)(76,"mat-datepicker",null,3),r()(),a(78,"div",48)(79,"mat-form-field",49)(80,"mat-label"),d(81,"Notes"),r(),p(82,"mat-icon",50)(83,"textarea",61),r()(),a(84,"div",62)(85,"button",63),v("click",function(){f(t);let o=m();return h(o.deleteContact())}),d(86," Delete "),r(),a(87,"button",64),v("click",function(){f(t);let o=m();return h(o.toggleEditMode(!1))}),d(88," Cancel "),r(),a(89,"button",65),v("click",function(){f(t);let o=m();return h(o.updateContact())}),d(90," Save "),r()()()()()}if(e&2){let t=O(77),i=m();n(2),l("matTooltip","Close"),n(),l("svgIcon","heroicons_outline:x-mark"),n(3),l("formGroup",i.contactForm),n(6),l("multiple",!1)("accept","image/jpeg, image/png"),n(3),l("svgIcon","heroicons_outline:camera"),n(3),l("svgIcon","heroicons_outline:trash"),n(),_(i.contact.avatar?19:-1),n(),_(i.contact.avatar?-1:20),n(2),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:user-circle"),n(),l("formControlName","name")("placeholder","Name")("spellcheck",!1),n(2),_(i.contact.tags.length?28:-1),n(3),_(i.contact.tags.length?31:-1),n(),_(i.contact.tags.length?-1:32),n(4),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:briefcase"),n(),l("formControlName","title")("placeholder","Job title"),n(2),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:building-office-2"),n(),l("formControlName","company")("placeholder","Company"),n(3),I(i.contactForm.get("emails").controls),n(3),l("svgIcon","heroicons_solid:plus-circle"),n(5),I(i.contactForm.get("phoneNumbers").controls),n(3),l("svgIcon","heroicons_solid:plus-circle"),n(4),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:map-pin"),n(),l("formControlName","address")("placeholder","Address"),n(2),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:cake"),n(),l("matDatepicker",t)("formControlName","birthday")("placeholder","Birthday"),n(),l("for",t),n(4),l("subscriptSizing","dynamic"),n(3),l("svgIcon","heroicons_solid:bars-3-bottom-left"),n(),l("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),n(2),l("color","warn")("matTooltip","Delete"),n(2),l("matTooltip","Cancel"),n(2),l("color","primary")("disabled",i.contactForm.invalid)("matTooltip","Save")}}var ke=(()=>{class e{constructor(t,i,o,c,u,b,R,we,Se,Te){this._activatedRoute=t,this._changeDetectorRef=i,this._contactsListComponent=o,this._contactsService=c,this._formBuilder=u,this._fuseConfirmationService=b,this._renderer2=R,this._router=we,this._overlay=Se,this._viewContainerRef=Te,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new K}ngOnInit(){this._contactsListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[Yt.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this._contactsService.contacts$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.contacts=t,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this._contactsListComponent.matDrawer.open(),this.contact=t,this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(t);let i=[];t.emails.length>0?t.emails.forEach(c=>{i.push(this._formBuilder.group({email:[c.email],label:[c.label]}))}):i.push(this._formBuilder.group({email:[""],label:[""]})),i.forEach(c=>{this.contactForm.get("emails").push(c)});let o=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(c=>{o.push(this._formBuilder.group({country:[c.country],phoneNumber:[c.phoneNumber],label:[c.label]}))}):o.push(this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),o.forEach(c=>{this.contactForm.get("phoneNumbers").push(c)}),this.toggleEditMode(!1),this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this._contactsService.tags$.pipe(w(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return this._contactsListComponent.matDrawer.close()}toggleEditMode(t=null){t===null?this.editMode=!this.editMode:this.editMode=t,this._changeDetectorRef.markForCheck()}updateContact(){let t=this.contactForm.getRawValue();t.emails=t.emails.filter(i=>i.email),t.phoneNumbers=t.phoneNumbers.filter(i=>i.phoneNumber),this._contactsService.updateContact(t.id,t).subscribe(()=>{this.toggleEditMode(!1)})}deleteContact(){this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this contact? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if(i==="confirmed"){let o=this.contact.id,c=this.contacts.findIndex(R=>R.id===o),u=c+(c===this.contacts.length-1?-1:1),b=this.contacts.length===1&&this.contacts[0].id===o?null:this.contacts[u].id;this._contactsService.deleteContact(o).subscribe(R=>{R&&(b?this._router.navigate(["../",b],{relativeTo:this._activatedRoute}):this._router.navigate(["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1))}),this._changeDetectorRef.markForCheck()}})}uploadAvatar(t){if(!t.length)return;let i=["image/jpeg","image/png"],o=t[0];i.includes(o.type)&&this._contactsService.uploadAvatar(this.contact.id,o).subscribe()}removeAvatar(){this.contactForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.contact.avatar=null}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._renderer2.addClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});let t=new Lt(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(t),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._renderer2.removeClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),t&&t.isAttached&&t.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){let i=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(i))}filterTagsInputKeyDown(t){if(t.key!=="Enter")return;if(this.filteredTags.length===0){this.createTag(t.target.value),t.target.value="";return}let i=this.filteredTags[0];this.contact.tags.find(c=>c===i.id)?this.removeTagFromContact(i):this.addTagToContact(i)}createTag(t){let i={title:t};this._contactsService.createTag(i).subscribe(o=>{this.addTagToContact(o)})}updateTagTitle(t,i){t.title=i.target.value,this._contactsService.updateTag(t.id,t).pipe(xt(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._contactsService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToContact(t){this.contact.tags.unshift(t.id),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}removeTagFromContact(t){this.contact.tags.splice(this.contact.tags.findIndex(i=>i===t.id),1),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}toggleContactTag(t){this.contact.tags.includes(t.id)?this.removeTagFromContact(t):this.addTagToContact(t)}shouldShowCreateTagButton(t){return!(t===""||this.tags.findIndex(i=>i.title.toLowerCase()===t.toLowerCase())>-1)}addEmailField(){let t=this._formBuilder.group({email:[""],label:[""]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){let t=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}getCountryByIso(t){return this.countries.find(i=>i.iso===t)}trackByFn(t,i){return i.id||t}static{this.\u0275fac=function(i){return new(i||e)(g(J),g(X),g(ft),g(M),g(ne),g(Gt),g(wt),g(Q),g(Ot),g(St))}}static{this.\u0275cmp=P({type:e,selectors:[["contacts-details"]],viewQuery:function(i,o){if(i&1&&(j(Ke,5),j(Ge,5),j(He,5)),i&2){let c;z(c=L())&&(o._avatarFileInput=c.first),z(c=L())&&(o._tagsPanel=c.first),z(c=L())&&(o._tagsPanelOrigin=c.first)}},decls:3,vars:2,consts:[["avatarFileInput",""],["tagsPanelOrigin",""],["tagsPanel",""],["birthdayDatepicker",""],["newTagInput",""],[1,"flex","w-full","flex-col"],[1,"relative","h-40","w-full","bg-primary-800","px-8","sm:h-48","sm:px-12"],[1,"mx-auto","flex","w-full","max-w-3xl","items-center","justify-end","pt-6"],["mat-icon-button","",3,"click","matTooltip"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-auto","flex-col","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"-mt-16","flex","flex-auto","items-end"],[1,"ring-bg-card","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","overflow-hidden","rounded","bg-gray-200","text-8xl","font-bold","uppercase","leading-none","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"mb-1","ml-auto","flex","items-center"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","truncate","text-4xl","font-bold"],[1,"mt-2","flex","flex-wrap","items-center"],[1,"mt-4","flex","flex-col","space-y-8","border-t","pt-6"],[1,"flex","sm:items-center"],[1,"flex"],[1,"mb-3","mr-3","flex","items-center","justify-center","rounded-full","bg-gray-100","px-3","py-1","leading-normal","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"whitespace-nowrap","text-sm","font-medium"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"ml-6","min-w-0","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"text-primary-500","hover:underline",3,"href"],[1,"text-secondary","truncate","text-md"],[1,"mx-2"],[1,"font-medium"],[1,"hidden","h-4","w-6","overflow-hidden","sm:flex",3,"matTooltip"],[1,"font-mono","sm:ml-3"],[1,"ml-2.5","font-mono"],[1,"prose","prose-sm","ml-6","max-w-none",3,"innerHTML"],[1,"relative","h-40","w-full","bg-primary-800","px-8","dark:bg-accent-700","sm:h-48","sm:px-12"],[1,"relative","flex","flex-auto","flex-col","items-center","px-6","sm:px-12"],[3,"formGroup"],[1,"ring-bg-card","relative","flex","h-32","w-32","items-center","justify-center","overflow-hidden","rounded-full","ring-4"],[1,"absolute","inset-0","z-10","bg-black","bg-opacity-50"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","avatar-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","avatar-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"mt-8"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","icon-size-5","sm:flex",3,"svgIcon"],["matInput","",3,"formControlName","placeholder","spellcheck"],[1,"-m-1.5","mt-6","flex","flex-wrap","items-center"],[1,"m-1.5","flex","cursor-pointer","items-center","justify-center","rounded-full","bg-gray-100","px-4","leading-9","text-gray-500","dark:bg-gray-700","dark:text-gray-300",3,"click"],["matInput","",3,"formControlName","placeholder"],[1,"space-y-4"],[1,"group","-ml-4","mt-2","inline-flex","cursor-pointer","items-center","rounded","px-4","py-2",3,"click"],[1,"text-secondary","ml-2","font-medium","group-hover:underline"],[1,"relative","flex"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["matInput","","cdkTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"-mx-6","mt-10","flex","items-center","border-t","bg-gray-50","py-4","pl-1","pr-4","dark:bg-transparent","sm:-mx-12","sm:pl-7","sm:pr-12"],["mat-button","",3,"click","color","matTooltip"],["mat-button","",1,"ml-auto",3,"click","matTooltip"],["mat-flat-button","",1,"ml-2",3,"click","color","disabled","matTooltip"],[1,"m-1.5","flex","items-center","justify-center","rounded-full","bg-gray-100","px-4","leading-9","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"whitespace-nowrap","text-md","font-medium"],[1,"ml-1.5","whitespace-nowrap","text-md","font-medium"],[1,"bg-card","w-60","rounded","border","shadow-md"],[1,"m-3","mr-2","flex","items-center"],[1,"flex","items-center"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],["mat-icon-button","",1,"ml-1",3,"click"],[1,"flex","max-h-64","flex-col","overflow-y-auto","border-t","py-2"],[1,"space-y-2","py-2"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","pl-4","pr-3","leading-none","hover:bg-hover"],["matRipple","",1,"flex","h-10","min-h-10","cursor-pointer","items-center","pl-1","pr-4","hover:bg-hover"],["matRipple","",1,"flex","h-10","min-h-10","cursor-pointer","items-center","pl-1","pr-4","hover:bg-hover",3,"click"],[1,"pointer-events-none","flex","h-10","min-h-10","items-center",3,"checked","color","disableRipple"],[1,"fuse-mat-dense","mx-4","w-full",3,"subscriptSizing"],["matInput","",3,"input","value"],["mat-icon-button","","matSuffix","",3,"click"],[1,"ml-2","icon-size-5",3,"svgIcon"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","pl-4","pr-3","leading-none","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"flex-auto",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder","spellcheck"],[1,"ml-2","w-full","max-w-24","flex-auto","sm:ml-4","sm:max-w-40",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder"],[1,"flex","w-10","items-center","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Remove",1,"h-8","min-h-8","w-8",3,"click"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"mr-1","hidden","h-4","w-6","overflow-hidden","sm:flex"],[1,"text-default","font-medium","sm:mx-0.5"],[3,"value"],[1,"h-4","w-6","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(i,o){i&1&&(a(0,"div",5),C(1,mi,26,14)(2,$i,91,49),r()),i&2&&(n(),_(o.editMode?-1:1),n(),_(o.editMode?2:-1))},dependencies:[ot,nt,Kt,qt,Xt,Wt,rt,at,mt,te,ct,lt,Jt,dt,st,ee,ie,Pt,Nt,it,et,Qt,tt,Ut,_t,pt,oe,ce,re,Y,ue,pe,_e,jt,zt,ve,fe,he,Ce,ae,be,Vt],encapsulation:2,changeDetection:0})}}return e})();var Bi=(e,s)=>{let t=$(M),i=$(Q);return t.getContactById(e.paramMap.get("id")).pipe(gt(o=>{console.error(o);let c=s.url.split("/").slice(0,-1).join("/");return i.navigateByUrl(c),G(o)}))},Ai=(e,s,t,i)=>{let o=i.root;for(;o.firstChild;)o=o.firstChild;return!i.url.includes("/contacts")||o.paramMap.get("id")?!0:e.closeDrawer().then(()=>!0)},Mn=[{path:"",component:ge,resolve:{tags:()=>$(M).getTags()},children:[{path:"",component:ft,resolve:{contacts:()=>$(M).getContacts(),countries:()=>$(M).getCountries()},children:[{path:":id",component:ke,resolve:{contact:Bi,countries:()=>$(M).getCountries()},canDeactivate:[Ai]}]}]}];export{Mn as default};
